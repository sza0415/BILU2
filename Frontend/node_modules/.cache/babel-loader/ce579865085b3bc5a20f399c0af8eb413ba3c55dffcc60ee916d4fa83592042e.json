{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport { ref, reactive, computed, onMounted } from 'vue';\nimport { Modal } from 'bootstrap';\nimport { getCaseList, searchCases, getCaseDetail, addCase, updateCase, deleteCase as deleteCaseApi, packageCase, getCaseStatistics } from '../api/case';\nexport default {\n  name: 'CaseManagement',\n  setup() {\n    // 状态变量\n    const loading = ref(false);\n    const detailLoading = ref(false);\n    const statisticsLoading = ref(false);\n    const submitting = ref(false);\n    const showAdvancedSearch = ref(false);\n    const cases = ref([]);\n    const caseTypes = ref([]);\n    const statusChoices = ref([]);\n    const selectedCase = ref(null);\n    const caseDetail = ref({\n      case: null,\n      records: []\n    });\n    const statistics = ref({\n      totalCases: 0,\n      criminalCases: 0,\n      civilCases: 0,\n      administrativeCases: 0,\n      investigatingCases: 0,\n      inTrialCases: 0,\n      closedCases: 0\n    });\n\n    // 分页相关\n    const currentPage = ref(1);\n    const pageSize = ref(10);\n    const totalItems = ref(0);\n    const totalPages = ref(0);\n\n    // 搜索表单\n    const searchForm = reactive({\n      q: '',\n      caseType: '',\n      status: '',\n      startDateFrom: '',\n      startDateTo: '',\n      createdAtFrom: '',\n      createdAtTo: '',\n      sortBy: 'createdAt_desc',\n      page: 1,\n      size: 10\n    });\n\n    // 案件表单\n    const caseForm = reactive({\n      id: null,\n      caseName: '',\n      caseType: '',\n      status: '',\n      caseNumber: '',\n      startDate: '',\n      endDate: '',\n      description: ''\n    });\n\n    // 模态框实例\n    let addCaseModalInstance = null;\n    let editCaseModalInstance = null;\n    let deleteCaseModalInstance = null;\n    let caseDetailModalInstance = null;\n\n    // 计算属性：显示的页码\n    const displayedPages = computed(() => {\n      const pages = [];\n      const maxVisiblePages = 5;\n      if (totalPages.value <= maxVisiblePages) {\n        // 如果总页数小于等于最大可见页数，显示所有页码\n        for (let i = 1; i <= totalPages.value; i++) {\n          pages.push(i);\n        }\n      } else {\n        // 否则，显示当前页附近的页码\n        let startPage = Math.max(currentPage.value - Math.floor(maxVisiblePages / 2), 1);\n        let endPage = startPage + maxVisiblePages - 1;\n        if (endPage > totalPages.value) {\n          endPage = totalPages.value;\n          startPage = Math.max(endPage - maxVisiblePages + 1, 1);\n        }\n        for (let i = startPage; i <= endPage; i++) {\n          pages.push(i);\n        }\n      }\n      return pages;\n    });\n\n    // 初始化模态框\n    const initModals = () => {\n      addCaseModalInstance = new Modal(document.getElementById('addCaseModal'));\n      editCaseModalInstance = new Modal(document.getElementById('editCaseModal'));\n      deleteCaseModalInstance = new Modal(document.getElementById('deleteCaseModal'));\n      caseDetailModalInstance = new Modal(document.getElementById('caseDetailModal'));\n    };\n\n    // 加载案件列表\n    const loadCases = async () => {\n      loading.value = true;\n      try {\n        const response = await getCaseList();\n        if (response.data.code === 200) {\n          cases.value = response.data.data || [];\n        } else {\n          console.error('加载案件列表失败:', response.data.msg);\n        }\n      } catch (error) {\n        console.error('加载案件列表失败:', error);\n      } finally {\n        loading.value = false;\n      }\n    };\n\n    // 搜索案件\n    const searchCasesData = async () => {\n      loading.value = true;\n      try {\n        // 构建搜索参数\n        const params = {\n          ...searchForm\n        };\n\n        // 处理排序\n        if (params.sortBy) {\n          const [field, order] = params.sortBy.split('_');\n          params.sortField = field;\n          params.sortOrder = order;\n          delete params.sortBy;\n        }\n        const response = await searchCases(params);\n        if (response.data.code === 200) {\n          const result = response.data.data;\n          cases.value = result.records || [];\n          totalItems.value = result.total || 0;\n          totalPages.value = result.pages || 0;\n          currentPage.value = result.current || 1;\n\n          // 获取案件类型和状态选项\n          if (result.extra) {\n            caseTypes.value = result.extra.caseTypes || [];\n            statusChoices.value = result.extra.statusChoices || [];\n          }\n        } else {\n          console.error('搜索案件失败:', response.data.msg);\n        }\n      } catch (error) {\n        console.error('搜索案件失败:', error);\n      } finally {\n        loading.value = false;\n      }\n    };\n\n    // 重置搜索表单\n    const resetSearch = () => {\n      Object.keys(searchForm).forEach(key => {\n        if (key !== 'page' && key !== 'size' && key !== 'sortBy') {\n          searchForm[key] = '';\n        }\n      });\n      searchForm.page = 1;\n      searchForm.sortBy = 'createdAt_desc';\n      searchCasesData();\n    };\n\n    // 切换页码\n    const changePage = page => {\n      if (page < 1 || page > totalPages.value || page === currentPage.value) {\n        return;\n      }\n      searchForm.page = page;\n      searchCasesData();\n    };\n\n    // 显示添加案件模态框\n    const showAddCaseModal = () => {\n      // 重置表单\n      Object.keys(caseForm).forEach(key => {\n        caseForm[key] = key === 'id' ? null : '';\n      });\n      addCaseModalInstance.show();\n    };\n\n    // 显示编辑案件模态框\n    const showEditCaseModal = caseItem => {\n      // 填充表单\n      Object.keys(caseForm).forEach(key => {\n        if (key === 'id') {\n          caseForm.id = caseItem.id;\n        } else if (key === 'startDate' || key === 'endDate') {\n          caseForm[key] = caseItem[key] ? caseItem[key].substring(0, 10) : '';\n        } else {\n          caseForm[key] = caseItem[key] || '';\n        }\n      });\n      editCaseModalInstance.show();\n    };\n\n    // 确认删除案件\n    const confirmDeleteCase = caseItem => {\n      selectedCase.value = caseItem;\n      deleteCaseModalInstance.show();\n    };\n\n    // 查看案件详情\n    const viewCaseDetail = async caseId => {\n      detailLoading.value = true;\n      caseDetail.value = {\n        case: null,\n        records: []\n      };\n      caseDetailModalInstance.show();\n      try {\n        const response = await getCaseDetail(caseId);\n        if (response.data.code === 200) {\n          caseDetail.value = response.data.data || {\n            case: null,\n            records: []\n          };\n        } else {\n          console.error('获取案件详情失败:', response.data.msg);\n        }\n      } catch (error) {\n        console.error('获取案件详情失败:', error);\n      } finally {\n        detailLoading.value = false;\n      }\n    };\n\n    // 提交添加案件\n    const submitAddCase = async () => {\n      // 表单验证\n      if (!caseForm.caseName || !caseForm.caseType || !caseForm.status) {\n        alert('请填写必填字段：案件名称、案件类型和案件状态');\n        return;\n      }\n      submitting.value = true;\n      try {\n        const response = await addCase(caseForm);\n        if (response.data.code === 200) {\n          alert('案件添加成功');\n          addCaseModalInstance.hide();\n          searchCasesData(); // 刷新列表\n        } else {\n          alert(`案件添加失败: ${response.data.msg}`);\n        }\n      } catch (error) {\n        console.error('添加案件失败:', error);\n        alert(`添加案件失败: ${error.message}`);\n      } finally {\n        submitting.value = false;\n      }\n    };\n\n    // 提交编辑案件\n    const submitEditCase = async () => {\n      // 表单验证\n      if (!caseForm.caseName || !caseForm.caseType || !caseForm.status) {\n        alert('请填写必填字段：案件名称、案件类型和案件状态');\n        return;\n      }\n      submitting.value = true;\n      try {\n        const response = await updateCase(caseForm.id, caseForm);\n        if (response.data.code === 200) {\n          alert('案件更新成功');\n          editCaseModalInstance.hide();\n          searchCasesData(); // 刷新列表\n        } else {\n          alert(`案件更新失败: ${response.data.msg}`);\n        }\n      } catch (error) {\n        console.error('更新案件失败:', error);\n        alert(`更新案件失败: ${error.message}`);\n      } finally {\n        submitting.value = false;\n      }\n    };\n\n    // 删除案件\n    const deleteCase = async () => {\n      if (!selectedCase.value || !selectedCase.value.id) {\n        return;\n      }\n      submitting.value = true;\n      try {\n        const response = await deleteCaseApi(selectedCase.value.id);\n        if (response.data.code === 200) {\n          alert('案件删除成功');\n          deleteCaseModalInstance.hide();\n          searchCasesData(); // 刷新列表\n        } else {\n          alert(`案件删除失败: ${response.data.msg}`);\n        }\n      } catch (error) {\n        console.error('删除案件失败:', error);\n        alert(`删除案件失败: ${error.message}`);\n      } finally {\n        submitting.value = false;\n      }\n    };\n\n    // 打包案件笔录\n    const packageCaseRecords = async () => {\n      if (!caseDetail.value.case || !caseDetail.value.case.id) {\n        return;\n      }\n      try {\n        const response = await packageCase(caseDetail.value.case.id);\n        // 处理文件下载\n        const blob = new Blob([response.data], {\n          type: response.headers['content-type']\n        });\n        const link = document.createElement('a');\n        link.href = URL.createObjectURL(blob);\n\n        // 从响应头获取文件名，如果没有则使用默认名称\n        const contentDisposition = response.headers['content-disposition'];\n        let filename = `案件_${caseDetail.value.case.caseNumber}.zip`;\n        if (contentDisposition) {\n          const filenameMatch = contentDisposition.match(/filename=\"(.+)\"/);\n          if (filenameMatch && filenameMatch[1]) {\n            filename = decodeURIComponent(filenameMatch[1]);\n          }\n        }\n        link.download = filename;\n        link.click();\n        URL.revokeObjectURL(link.href);\n      } catch (error) {\n        console.error('打包案件笔录失败:', error);\n        alert('打包案件笔录失败，请稍后重试');\n      }\n    };\n\n    // 格式化日期\n    const formatDate = dateString => {\n      if (!dateString) return '';\n      const date = new Date(dateString);\n      return date.toISOString().split('T')[0];\n    };\n\n    // 格式化日期时间\n    const formatDateTime = dateTimeString => {\n      if (!dateTimeString) return '';\n      const date = new Date(dateTimeString);\n      return `${date.toISOString().split('T')[0]} ${date.toTimeString().split(' ')[0].substring(0, 5)}`;\n    };\n\n    // 截断文本\n    const truncateText = (text, maxLength) => {\n      if (!text) return '';\n      return text.length > maxLength ? text.substring(0, maxLength) + '...' : text;\n    };\n\n    // 加载统计数据\n    const loadStatistics = async () => {\n      statisticsLoading.value = true;\n      try {\n        const response = await getCaseStatistics();\n        if (response.data.code === 200) {\n          statistics.value = response.data.data || {\n            totalCases: 0,\n            criminalCases: 0,\n            civilCases: 0,\n            administrativeCases: 0,\n            investigatingCases: 0,\n            inTrialCases: 0,\n            closedCases: 0\n          };\n        } else {\n          console.error('加载统计数据失败:', response.data.msg);\n        }\n      } catch (error) {\n        console.error('加载统计数据失败:', error);\n      } finally {\n        statisticsLoading.value = false;\n      }\n    };\n\n    // 组件挂载时执行\n    onMounted(() => {\n      initModals();\n      searchCasesData();\n      loadStatistics();\n    });\n    return {\n      loading,\n      detailLoading,\n      statisticsLoading,\n      submitting,\n      showAdvancedSearch,\n      cases,\n      caseTypes,\n      statusChoices,\n      selectedCase,\n      caseDetail,\n      statistics,\n      currentPage,\n      pageSize,\n      totalItems,\n      totalPages,\n      displayedPages,\n      searchForm,\n      caseForm,\n      loadCases,\n      searchCases: searchCasesData,\n      resetSearch,\n      changePage,\n      showAddCaseModal,\n      showEditCaseModal,\n      confirmDeleteCase,\n      viewCaseDetail,\n      submitAddCase,\n      submitEditCase,\n      deleteCase,\n      packageCaseRecords,\n      loadStatistics,\n      formatDate,\n      formatDateTime,\n      truncateText\n    };\n  }\n};","map":{"version":3,"names":["ref","reactive","computed","onMounted","Modal","getCaseList","searchCases","getCaseDetail","addCase","updateCase","deleteCase","deleteCaseApi","packageCase","getCaseStatistics","name","setup","loading","detailLoading","statisticsLoading","submitting","showAdvancedSearch","cases","caseTypes","statusChoices","selectedCase","caseDetail","case","records","statistics","totalCases","criminalCases","civilCases","administrativeCases","investigatingCases","inTrialCases","closedCases","currentPage","pageSize","totalItems","totalPages","searchForm","q","caseType","status","startDateFrom","startDateTo","createdAtFrom","createdAtTo","sortBy","page","size","caseForm","id","caseName","caseNumber","startDate","endDate","description","addCaseModalInstance","editCaseModalInstance","deleteCaseModalInstance","caseDetailModalInstance","displayedPages","pages","maxVisiblePages","value","i","push","startPage","Math","max","floor","endPage","initModals","document","getElementById","loadCases","response","data","code","console","error","msg","searchCasesData","params","field","order","split","sortField","sortOrder","result","total","current","extra","resetSearch","Object","keys","forEach","key","changePage","showAddCaseModal","show","showEditCaseModal","caseItem","substring","confirmDeleteCase","viewCaseDetail","caseId","submitAddCase","alert","hide","message","submitEditCase","packageCaseRecords","blob","Blob","type","headers","link","createElement","href","URL","createObjectURL","contentDisposition","filename","filenameMatch","match","decodeURIComponent","download","click","revokeObjectURL","formatDate","dateString","date","Date","toISOString","formatDateTime","dateTimeString","toTimeString","truncateText","text","maxLength","length","loadStatistics"],"sources":["/Users/sunziang/IdeaProjects/backend_bilu/bilu_backend2/src/views/CaseManagement.vue"],"sourcesContent":["<template>\n  <div class=\"container-fluid mt-4\">\n    <!-- 页面标题区域 -->\n    <div class=\"row mb-4\">\n      <div class=\"col-12\">\n        <div class=\"d-flex justify-content-between align-items-center\">\n          <div>\n            <h2 class=\"display-6 fw-bold text-primary mb-0\">\n              <i class=\"bi bi-folder2-open me-2\"></i>案件管理\n            </h2>\n            <p class=\"text-muted mb-0\">查看和管理所有案件信息</p>\n          </div>\n          <div class=\"btn-group\">\n            <button class=\"btn btn-outline-primary\" @click=\"showAdvancedSearch = !showAdvancedSearch\">\n              <i class=\"bi bi-funnel me-2\"></i>高级搜索\n            </button>\n            <button class=\"btn btn-success\" @click=\"showAddCaseModal\">\n              <i class=\"bi bi-plus-circle me-2\"></i>新增案件\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n    \n    <!-- 案件统计卡片 -->\n    <div class=\"row mb-4\">\n      <!-- 统计标题 -->\n      <div class=\"col-12 mb-3\">\n        <div class=\"d-flex align-items-center\">\n          <div class=\"stats-section-icon bg-primary bg-opacity-10 text-primary me-2\">\n            <i class=\"bi bi-bar-chart-line\"></i>\n          </div>\n          <h5 class=\"fw-bold mb-0\">案件统计</h5>\n        </div>\n      </div>\n      \n      <!-- 按类型统计 -->\n      <div class=\"col-12 mb-3\">\n        <div class=\"stats-section-title\">\n          <i class=\"bi bi-bookmark me-1 text-primary\"></i>\n          <span>按类型统计</span>\n        </div>\n      </div>\n      \n      <div class=\"col-md-3\">\n        <div class=\"card border-0 shadow-sm stats-card\">\n          <div class=\"card-body\">\n            <div class=\"d-flex align-items-center\">\n              <div class=\"stats-icon bg-primary bg-opacity-10 text-primary\">\n                <i class=\"bi bi-folder2\"></i>\n              </div>\n              <div class=\"ms-3\">\n                <h3 class=\"fw-bold mb-0\">{{ statistics.totalCases || 0 }}</h3>\n                <p class=\"text-muted mb-0\">总案件数</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      <div class=\"col-md-3\">\n        <div class=\"card border-0 shadow-sm stats-card\">\n          <div class=\"card-body\">\n            <div class=\"d-flex align-items-center\">\n              <div class=\"stats-icon bg-danger bg-opacity-10 text-danger\">\n                <i class=\"bi bi-shield-exclamation\"></i>\n              </div>\n              <div class=\"ms-3\">\n                <h3 class=\"fw-bold mb-0\">{{ statistics.criminalCases || 0 }}</h3>\n                <p class=\"text-muted mb-0\">刑事案件</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      <div class=\"col-md-3\">\n        <div class=\"card border-0 shadow-sm stats-card\">\n          <div class=\"card-body\">\n            <div class=\"d-flex align-items-center\">\n              <div class=\"stats-icon bg-success bg-opacity-10 text-success\">\n                <i class=\"bi bi-people\"></i>\n              </div>\n              <div class=\"ms-3\">\n                <h3 class=\"fw-bold mb-0\">{{ statistics.civilCases || 0 }}</h3>\n                <p class=\"text-muted mb-0\">民事案件</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      <div class=\"col-md-3\">\n        <div class=\"card border-0 shadow-sm stats-card\">\n          <div class=\"card-body\">\n            <div class=\"d-flex align-items-center\">\n              <div class=\"stats-icon bg-info bg-opacity-10 text-info\">\n                <i class=\"bi bi-building\"></i>\n              </div>\n              <div class=\"ms-3\">\n                <h3 class=\"fw-bold mb-0\">{{ statistics.administrativeCases || 0 }}</h3>\n                <p class=\"text-muted mb-0\">行政案件</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      <!-- 按状态统计 -->\n      <div class=\"col-12 mt-4 mb-3\">\n        <div class=\"stats-section-title\">\n          <i class=\"bi bi-flag me-1 text-primary\"></i>\n          <span>按状态统计</span>\n        </div>\n      </div>\n      \n      <div class=\"col-md-4\">\n        <div class=\"card border-0 shadow-sm stats-card\">\n          <div class=\"card-body\">\n            <div class=\"d-flex align-items-center\">\n              <div class=\"stats-icon bg-warning bg-opacity-10 text-warning\">\n                <i class=\"bi bi-search\"></i>\n              </div>\n              <div class=\"ms-3\">\n                <h3 class=\"fw-bold mb-0\">{{ statistics.investigatingCases || 0 }}</h3>\n                <p class=\"text-muted mb-0\">调查中</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      <div class=\"col-md-4\">\n        <div class=\"card border-0 shadow-sm stats-card\">\n          <div class=\"card-body\">\n            <div class=\"d-flex align-items-center\">\n              <div class=\"stats-icon bg-secondary bg-opacity-10 text-secondary\">\n                <i class=\"bi bi-hourglass-split\"></i>\n              </div>\n              <div class=\"ms-3\">\n                <h3 class=\"fw-bold mb-0\">{{ statistics.inTrialCases || 0 }}</h3>\n                <p class=\"text-muted mb-0\">审理中</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      <div class=\"col-md-4\">\n        <div class=\"card border-0 shadow-sm stats-card\">\n          <div class=\"card-body\">\n            <div class=\"d-flex align-items-center\">\n              <div class=\"stats-icon bg-dark bg-opacity-10 text-dark\">\n                <i class=\"bi bi-check2-circle\"></i>\n              </div>\n              <div class=\"ms-3\">\n                <h3 class=\"fw-bold mb-0\">{{ statistics.closedCases || 0 }}</h3>\n                <p class=\"text-muted mb-0\">已结案</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 搜索区域 -->\n    <div class=\"row mb-4\">\n      <div class=\"col-12\">\n        <div class=\"card border-0 shadow-sm rounded-3 overflow-hidden\">\n          <div class=\"card-header bg-white py-3 border-0\">\n            <div class=\"d-flex align-items-center\">\n              <i class=\"bi bi-search fs-4 text-primary me-2\"></i>\n              <h5 class=\"card-title mb-0 fw-bold\">案件搜索</h5>\n            </div>\n          </div>\n          <div class=\"card-body p-4\">\n            <!-- 基础搜索 -->\n            <div class=\"row g-3 mb-3\">\n              <div class=\"col-md-8\">\n                <label class=\"form-label fw-bold text-primary\">搜索关键词</label>\n                <div class=\"input-group input-group-lg shadow-sm rounded overflow-hidden\">\n                  <span class=\"input-group-text bg-white border-end-0\">\n                    <i class=\"bi bi-search text-primary\"></i>\n                  </span>\n                  <input \n                    type=\"text\" \n                    class=\"form-control border-start-0\" \n                    placeholder=\"输入关键词搜索案件名称、编号、描述等\"\n                    v-model=\"searchForm.q\"\n                    @keyup.enter=\"searchCases\"\n                  />\n                  <button class=\"btn btn-primary px-4\" @click=\"searchCases\">\n                    <i class=\"bi bi-search me-2\"></i>搜索\n                  </button>\n                </div>\n                <div class=\"form-text mt-2\"><i class=\"bi bi-info-circle me-1\"></i>支持按案件名称、编号、描述等信息进行搜索</div>\n              </div>\n              <div class=\"col-md-2\">\n                <label class=\"form-label fw-bold text-primary\">案件状态</label>\n                <select class=\"form-select form-select-lg shadow-sm\" v-model=\"searchForm.status\">\n                  <option value=\"\">全部状态</option>\n                  <option v-for=\"status in statusChoices\" :key=\"status\" :value=\"status\">{{ status }}</option>\n                </select>\n              </div>\n              <div class=\"col-md-2\">\n                <label class=\"form-label fw-bold text-primary\">排序方式</label>\n                <select class=\"form-select form-select-lg shadow-sm\" v-model=\"searchForm.sortBy\">\n                  <option value=\"createdAt_desc\">创建时间降序</option>\n                  <option value=\"createdAt_asc\">创建时间升序</option>\n                  <option value=\"startDate_desc\">立案日期降序</option>\n                  <option value=\"startDate_asc\">立案日期升序</option>\n                </select>\n              </div>\n            </div>\n\n            <!-- 高级搜索切换按钮 -->\n            <div class=\"d-flex justify-content-center mb-3\">\n              <button class=\"btn btn-link text-decoration-none\" @click=\"showAdvancedSearch = !showAdvancedSearch\">\n                <i class=\"bi\" :class=\"showAdvancedSearch ? 'bi-chevron-up' : 'bi-chevron-down'\"></i>\n                {{ showAdvancedSearch ? '收起' : '展开' }}高级搜索选项\n              </button>\n            </div>\n\n            <!-- 高级搜索 -->\n            <div v-show=\"showAdvancedSearch\" class=\"advanced-search-panel\">\n              <div class=\"p-4 bg-light rounded-3 border border-light\">\n                <h6 class=\"fw-bold mb-3 d-flex align-items-center\">\n                  <span class=\"badge bg-primary me-2\"><i class=\"bi bi-funnel-fill\"></i></span>高级搜索选项\n                </h6>\n                <div class=\"row g-3\">\n                  <div class=\"col-md-3\">\n                    <label class=\"form-label\">案件类型</label>\n                    <select class=\"form-select shadow-sm\" v-model=\"searchForm.caseType\">\n                      <option value=\"\">全部类型</option>\n                      <option v-for=\"type in caseTypes\" :key=\"type\" :value=\"type\">{{ type }}</option>\n                    </select>\n                  </div>\n                  <div class=\"col-md-3\">\n                    <label class=\"form-label\">立案日期（从）</label>\n                    <input type=\"date\" class=\"form-control shadow-sm\" v-model=\"searchForm.startDateFrom\">\n                  </div>\n                  <div class=\"col-md-3\">\n                    <label class=\"form-label\">立案日期（至）</label>\n                    <input type=\"date\" class=\"form-control shadow-sm\" v-model=\"searchForm.startDateTo\">\n                  </div>\n                  <div class=\"col-md-3\">\n                    <label class=\"form-label\">创建日期（从）</label>\n                    <input type=\"date\" class=\"form-control shadow-sm\" v-model=\"searchForm.createdAtFrom\">\n                  </div>\n                  <div class=\"col-md-3\">\n                    <label class=\"form-label\">创建日期（至）</label>\n                    <input type=\"date\" class=\"form-control shadow-sm\" v-model=\"searchForm.createdAtTo\">\n                  </div>\n                  <div class=\"col-12 text-end mt-4\">\n                    <button class=\"btn btn-outline-secondary me-2\" @click=\"resetSearch\">\n                      <i class=\"bi bi-arrow-counterclockwise me-2\"></i>重置\n                    </button>\n                    <button class=\"btn btn-primary px-4\" @click=\"searchCases\">\n                      <i class=\"bi bi-search me-2\"></i>搜索\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 案件列表 -->\n    <div class=\"row\">\n      <div class=\"col-12\">\n        <div class=\"card border-0 shadow-sm rounded-3 overflow-hidden\">\n          <div class=\"card-header bg-white py-3 border-0\">\n            <div class=\"d-flex align-items-center justify-content-between\">\n              <div class=\"d-flex align-items-center\">\n                <i class=\"bi bi-folder2-open fs-4 text-primary me-2\"></i>\n                <h5 class=\"card-title mb-0 fw-bold\">案件列表</h5>\n                <span class=\"badge bg-primary bg-opacity-10 text-primary ms-3\">{{ totalItems || 0 }}</span>\n              </div>\n              <button class=\"btn btn-sm btn-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#addCaseModal\" @click=\"resetCaseForm\">\n                <i class=\"bi bi-plus-lg me-1\"></i> 新增案件\n              </button>\n            </div>\n          </div>\n          <div class=\"card-body p-4\">\n            <div v-if=\"loading\" class=\"text-center py-5\">\n              <div class=\"spinner-border text-primary\" role=\"status\">\n                <span class=\"visually-hidden\">加载中...</span>\n              </div>\n              <p class=\"mt-3 text-muted\">正在加载案件数据...</p>\n            </div>\n            <div v-else-if=\"cases.length === 0\" class=\"text-center py-5\">\n              <div class=\"empty-state p-4\">\n                <i class=\"bi bi-folder2 text-muted\" style=\"font-size: 4rem;\"></i>\n                <h5 class=\"mt-4\">暂无案件记录</h5>\n                <p class=\"text-muted\">您可以点击\"新增案件\"按钮添加第一个案件</p>\n                <button class=\"btn btn-primary mt-3\" data-bs-toggle=\"modal\" data-bs-target=\"#addCaseModal\" @click=\"resetCaseForm\">\n                  <i class=\"bi bi-plus-lg me-1\"></i> 新增案件\n                </button>\n              </div>\n            </div>\n            <div v-else>\n              <div class=\"row\">\n                <div v-for=\"(caseItem, index) in cases\" :key=\"index\" class=\"col-md-12 mb-4\">\n                  <div class=\"card shadow-sm h-100 border-0 hover-card\">\n                    <div class=\"card-body p-4\">\n                      <div class=\"d-flex justify-content-between align-items-center mb-3\">\n                        <div class=\"d-flex align-items-center\">\n                          <div class=\"case-icon rounded-circle p-2 me-3\" \n                               :class=\"{\n                                 'bg-success bg-opacity-10': caseItem.caseType === '民事案件',\n                                 'bg-danger bg-opacity-10': caseItem.caseType === '刑事案件',\n                                 'bg-info bg-opacity-10': caseItem.caseType === '行政案件',\n                                 'bg-primary bg-opacity-10': !['民事案件', '刑事案件', '行政案件'].includes(caseItem.caseType)\n                               }\">\n                            <i class=\"bi fs-4\" \n                               :class=\"{\n                                 'bi-people text-success': caseItem.caseType === '民事案件',\n                                 'bi-shield-lock text-danger': caseItem.caseType === '刑事案件',\n                                 'bi-building text-info': caseItem.caseType === '行政案件',\n                                 'bi-folder text-primary': !['民事案件', '刑事案件', '行政案件'].includes(caseItem.caseType)\n                               }\"></i>\n                          </div>\n                          <div>\n                            <h5 class=\"card-title mb-0 fw-bold\">{{ caseItem.caseName }}</h5>\n                            <div class=\"text-muted small\">案件编号: {{ caseItem.caseNumber }}</div>\n                          </div>\n                        </div>\n                        <span class=\"badge rounded-pill px-3 py-2\" :class=\"{\n                          'bg-success': caseItem.status === '已完成' || caseItem.status === '已结案',\n                          'bg-warning text-dark': caseItem.status === '进行中',\n                          'bg-secondary': caseItem.status !== '已完成' && caseItem.status !== '已结案' && caseItem.status !== '进行中'\n                        }\">{{ caseItem.status }}</span>\n                      </div>\n                      \n                      <div class=\"row mt-4\">\n                        <div class=\"col-md-6\">\n                          <div class=\"d-flex align-items-center mb-3\">\n                            <div class=\"icon-box me-2 bg-primary bg-opacity-10\"><i class=\"bi bi-folder text-primary\"></i></div>\n                            <div><span class=\"text-muted\">案件类型:</span> <span class=\"fw-medium\">{{ caseItem.caseType }}</span></div>\n                          </div>\n                          <div class=\"d-flex align-items-center mb-3\">\n                            <div class=\"icon-box me-2 bg-success bg-opacity-10\"><i class=\"bi bi-calendar-date text-success\"></i></div>\n                            <div><span class=\"text-muted\">立案日期:</span> <span class=\"fw-medium\">{{ formatDate(caseItem.startDate) }}</span></div>\n                          </div>\n                          <div class=\"d-flex align-items-center mb-3\">\n                            <div class=\"icon-box me-2 bg-info bg-opacity-10\"><i class=\"bi bi-card-text text-info\"></i></div>\n                            <div><span class=\"text-muted\">笔录数量:</span> <span class=\"fw-medium\">{{ caseItem.recordCount || 0 }}</span></div>\n                          </div>\n                        </div>\n                        <div class=\"col-md-6\">\n                          <div class=\"d-flex align-items-center mb-3\">\n                            <div class=\"icon-box me-2 bg-warning bg-opacity-10\"><i class=\"bi bi-clock-history text-warning\"></i></div>\n                            <div><span class=\"text-muted\">创建时间:</span> <span class=\"fw-medium\">{{ formatDateTime(caseItem.createdAt) }}</span></div>\n                          </div>\n                          <div v-if=\"caseItem.endDate\" class=\"d-flex align-items-center mb-3\">\n                            <div class=\"icon-box me-2 bg-danger bg-opacity-10\"><i class=\"bi bi-calendar-check text-danger\"></i></div>\n                            <div><span class=\"text-muted\">结案日期:</span> <span class=\"fw-medium\">{{ formatDate(caseItem.endDate) }}</span></div>\n                          </div>\n                        </div>\n                      </div>\n                      \n                      <div v-if=\"caseItem.description\" class=\"mt-3 p-3 bg-light rounded-3\">\n                        <div class=\"d-flex align-items-center mb-2\">\n                          <i class=\"bi bi-info-circle text-primary me-2\"></i>\n                          <strong>案件描述</strong>\n                        </div>\n                        <p class=\"text-muted mb-0\">{{ truncateText(caseItem.description, 150) }}</p>\n                      </div>\n                      \n                      <div class=\"mt-4 d-flex justify-content-end\">\n                        <button class=\"btn btn-outline-danger me-2\" @click=\"confirmDeleteCase(caseItem)\">\n                          <i class=\"bi bi-trash me-1\"></i>删除\n                        </button>\n                        <button class=\"btn btn-outline-secondary me-2\" @click=\"showEditCaseModal(caseItem)\">\n                          <i class=\"bi bi-pencil me-1\"></i>编辑\n                        </button>\n                        <button class=\"btn btn-primary\" @click=\"viewCaseDetail(caseItem.id)\">\n                          <i class=\"bi bi-eye me-1\"></i>查看详情\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              \n              <!-- 分页控件 -->\n              <div class=\"d-flex flex-column flex-md-row justify-content-between align-items-center mt-5 pt-4 border-top\">\n                <div class=\"text-muted mb-3 mb-md-0\">\n                  <span class=\"badge bg-primary bg-opacity-10 text-primary me-2 p-2\">{{ totalItems }}</span>\n                  条记录，当前第 <span class=\"fw-bold text-primary\">{{ currentPage }}</span> / {{ totalPages }} 页\n                </div>\n                <nav aria-label=\"Page navigation\" class=\"pagination-container\">\n                  <ul class=\"pagination pagination-md\">\n                    <li class=\"page-item\" :class=\"{ disabled: currentPage === 1 }\">\n                      <a class=\"page-link rounded-start\" href=\"#\" @click.prevent=\"changePage(1)\" title=\"首页\">\n                        <i class=\"bi bi-chevron-double-left\"></i>\n                      </a>\n                    </li>\n                    <li class=\"page-item\" :class=\"{ disabled: currentPage === 1 }\">\n                      <a class=\"page-link\" href=\"#\" @click.prevent=\"changePage(currentPage - 1)\" title=\"上一页\">\n                        <i class=\"bi bi-chevron-left\"></i>\n                      </a>\n                    </li>\n                    <li v-for=\"page in displayedPages\" :key=\"page\" class=\"page-item\" :class=\"{ active: currentPage === page }\">\n                      <a class=\"page-link\" href=\"#\" @click.prevent=\"changePage(page)\">{{ page }}</a>\n                    </li>\n                    <li class=\"page-item\" :class=\"{ disabled: currentPage === totalPages }\">\n                      <a class=\"page-link\" href=\"#\" @click.prevent=\"changePage(currentPage + 1)\" title=\"下一页\">\n                        <i class=\"bi bi-chevron-right\"></i>\n                      </a>\n                    </li>\n                    <li class=\"page-item\" :class=\"{ disabled: currentPage === totalPages }\">\n                      <a class=\"page-link rounded-end\" href=\"#\" @click.prevent=\"changePage(totalPages)\" title=\"末页\">\n                        <i class=\"bi bi-chevron-double-right\"></i>\n                      </a>\n                    </li>\n                  </ul>\n                </nav>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 添加案件模态框 -->\n    <div class=\"modal fade\" id=\"addCaseModal\" tabindex=\"-1\" aria-labelledby=\"addCaseModalLabel\" aria-hidden=\"true\">\n      <div class=\"modal-dialog modal-lg\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header bg-success text-white\">\n            <h5 class=\"modal-title\" id=\"addCaseModalLabel\">\n              <i class=\"bi bi-plus-circle me-2\"></i>新增案件\n            </h5>\n            <button type=\"button\" class=\"btn-close btn-close-white\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n          </div>\n          <div class=\"modal-body\">\n            <form @submit.prevent=\"submitAddCase\">\n              <div class=\"mb-3\">\n                <label for=\"caseName\" class=\"form-label\">案件名称 <span class=\"text-danger\">*</span></label>\n                <input type=\"text\" class=\"form-control\" id=\"caseName\" v-model=\"caseForm.caseName\" required>\n              </div>\n              \n              <div class=\"row mb-3\">\n                <div class=\"col-md-6\">\n                  <label for=\"caseType\" class=\"form-label\">案件类型 <span class=\"text-danger\">*</span></label>\n                  <select class=\"form-select\" id=\"caseType\" v-model=\"caseForm.caseType\" required>\n                    <option value=\"\">请选择案件类型</option>\n                    <option v-for=\"type in caseTypes\" :key=\"type\" :value=\"type\">{{ type }}</option>\n                  </select>\n                </div>\n                <div class=\"col-md-6\">\n                  <label for=\"status\" class=\"form-label\">案件状态 <span class=\"text-danger\">*</span></label>\n                  <select class=\"form-select\" id=\"status\" v-model=\"caseForm.status\" required>\n                    <option value=\"\">请选择案件状态</option>\n                    <option v-for=\"status in statusChoices\" :key=\"status\" :value=\"status\">{{ status }}</option>\n                  </select>\n                </div>\n              </div>\n              \n              <div class=\"mb-3\">\n                <label for=\"caseNumber\" class=\"form-label\">案件编号</label>\n                <input type=\"text\" class=\"form-control\" id=\"caseNumber\" v-model=\"caseForm.caseNumber\" placeholder=\"可选，留空将自动生成\">\n              </div>\n              \n              <div class=\"row mb-3\">\n                <div class=\"col-md-6\">\n                  <label for=\"startDate\" class=\"form-label\">开始日期</label>\n                  <input type=\"date\" class=\"form-control\" id=\"startDate\" v-model=\"caseForm.startDate\">\n                </div>\n                <div class=\"col-md-6\">\n                  <label for=\"endDate\" class=\"form-label\">结束日期</label>\n                  <input type=\"date\" class=\"form-control\" id=\"endDate\" v-model=\"caseForm.endDate\">\n                </div>\n              </div>\n              \n              <div class=\"mb-3\">\n                <label for=\"description\" class=\"form-label\">案件描述</label>\n                <textarea class=\"form-control\" id=\"description\" v-model=\"caseForm.description\" rows=\"5\" placeholder=\"请输入案件的详细描述...\"></textarea>\n              </div>\n              \n              <div class=\"d-grid gap-2 d-md-flex justify-content-md-end\">\n                <button type=\"button\" class=\"btn btn-secondary me-md-2\" data-bs-dismiss=\"modal\">\n                  <i class=\"bi bi-x-circle me-2\"></i>取消\n                </button>\n                <button type=\"submit\" class=\"btn btn-success\" :disabled=\"submitting\">\n                  <i class=\"bi bi-check-circle me-2\"></i>\n                  <span v-if=\"submitting\">\n                    <span class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\n                    提交中...\n                  </span>\n                  <span v-else>创建案件</span>\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 编辑案件模态框 -->\n    <div class=\"modal fade\" id=\"editCaseModal\" tabindex=\"-1\" aria-labelledby=\"editCaseModalLabel\" aria-hidden=\"true\">\n      <div class=\"modal-dialog modal-lg\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header bg-primary text-white\">\n            <h5 class=\"modal-title\" id=\"editCaseModalLabel\">\n              <i class=\"bi bi-pencil-square me-2\"></i>编辑案件\n            </h5>\n            <button type=\"button\" class=\"btn-close btn-close-white\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n          </div>\n          <div class=\"modal-body\">\n            <form @submit.prevent=\"submitEditCase\">\n              <div class=\"mb-3\">\n                <label for=\"editCaseName\" class=\"form-label\">案件名称 <span class=\"text-danger\">*</span></label>\n                <input type=\"text\" class=\"form-control\" id=\"editCaseName\" v-model=\"caseForm.caseName\" required>\n              </div>\n              \n              <div class=\"row mb-3\">\n                <div class=\"col-md-6\">\n                  <label for=\"editCaseType\" class=\"form-label\">案件类型 <span class=\"text-danger\">*</span></label>\n                  <select class=\"form-select\" id=\"editCaseType\" v-model=\"caseForm.caseType\" required>\n                    <option value=\"\">请选择案件类型</option>\n                    <option v-for=\"type in caseTypes\" :key=\"type\" :value=\"type\">{{ type }}</option>\n                  </select>\n                </div>\n                <div class=\"col-md-6\">\n                  <label for=\"editStatus\" class=\"form-label\">案件状态 <span class=\"text-danger\">*</span></label>\n                  <select class=\"form-select\" id=\"editStatus\" v-model=\"caseForm.status\" required>\n                    <option value=\"\">请选择案件状态</option>\n                    <option v-for=\"status in statusChoices\" :key=\"status\" :value=\"status\">{{ status }}</option>\n                  </select>\n                </div>\n              </div>\n              \n              <div class=\"mb-3\">\n                <label for=\"editCaseNumber\" class=\"form-label\">案件编号</label>\n                <input type=\"text\" class=\"form-control\" id=\"editCaseNumber\" v-model=\"caseForm.caseNumber\" readonly>\n              </div>\n              \n              <div class=\"row mb-3\">\n                <div class=\"col-md-6\">\n                  <label for=\"editStartDate\" class=\"form-label\">开始日期</label>\n                  <input type=\"date\" class=\"form-control\" id=\"editStartDate\" v-model=\"caseForm.startDate\">\n                </div>\n                <div class=\"col-md-6\">\n                  <label for=\"editEndDate\" class=\"form-label\">结束日期</label>\n                  <input type=\"date\" class=\"form-control\" id=\"editEndDate\" v-model=\"caseForm.endDate\">\n                </div>\n              </div>\n              \n              <div class=\"mb-3\">\n                <label for=\"editDescription\" class=\"form-label\">案件描述</label>\n                <textarea class=\"form-control\" id=\"editDescription\" v-model=\"caseForm.description\" rows=\"5\" placeholder=\"请输入案件的详细描述...\"></textarea>\n              </div>\n              \n              <div class=\"d-grid gap-2 d-md-flex justify-content-md-end\">\n                <button type=\"button\" class=\"btn btn-secondary me-md-2\" data-bs-dismiss=\"modal\">\n                  <i class=\"bi bi-x-circle me-2\"></i>取消\n                </button>\n                <button type=\"submit\" class=\"btn btn-primary\" :disabled=\"submitting\">\n                  <i class=\"bi bi-check-circle me-2\"></i>\n                  <span v-if=\"submitting\">\n                    <span class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\n                    提交中...\n                  </span>\n                  <span v-else>保存修改</span>\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 删除确认模态框 -->\n    <div class=\"modal fade\" id=\"deleteCaseModal\" tabindex=\"-1\" aria-labelledby=\"deleteCaseModalLabel\" aria-hidden=\"true\">\n      <div class=\"modal-dialog\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header bg-danger text-white\">\n            <h5 class=\"modal-title\" id=\"deleteCaseModalLabel\">\n              <i class=\"bi bi-exclamation-triangle me-2\"></i>删除确认\n            </h5>\n            <button type=\"button\" class=\"btn-close btn-close-white\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n          </div>\n          <div class=\"modal-body\">\n            <p>您确定要删除案件 <strong>{{ selectedCase ? selectedCase.caseName : '' }}</strong> 吗？</p>\n            <p class=\"text-danger\"><i class=\"bi bi-exclamation-circle me-2\"></i>此操作将同时删除该案件下的所有笔录记录，且无法恢复！</p>\n          </div>\n          <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">\n              <i class=\"bi bi-x-circle me-2\"></i>取消\n            </button>\n            <button type=\"button\" class=\"btn btn-danger\" @click=\"deleteCase\" :disabled=\"submitting\">\n              <i class=\"bi bi-trash me-2\"></i>\n              <span v-if=\"submitting\">\n                <span class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\n                删除中...\n              </span>\n              <span v-else>确认删除</span>\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 案件详情模态框 -->\n    <div class=\"modal fade\" id=\"caseDetailModal\" tabindex=\"-1\" aria-labelledby=\"caseDetailModalLabel\" aria-hidden=\"true\">\n      <div class=\"modal-dialog modal-xl\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header bg-primary text-white\">\n            <h5 class=\"modal-title\" id=\"caseDetailModalLabel\">\n              <i class=\"bi bi-folder2-open me-2\"></i>案件详情\n            </h5>\n            <button type=\"button\" class=\"btn-close btn-close-white\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n          </div>\n          <div class=\"modal-body\">\n            <div v-if=\"detailLoading\" class=\"text-center py-5\">\n              <div class=\"spinner-border text-primary\" role=\"status\">\n                <span class=\"visually-hidden\">加载中...</span>\n              </div>\n              <p class=\"mt-3 text-muted\">正在加载案件详情...</p>\n            </div>\n            <div v-else>\n              <!-- 案件信息卡片 -->\n              <div class=\"card mb-4 shadow-sm\">\n                <div class=\"card-header bg-gradient d-flex justify-content-between align-items-center\">\n                  <h4 class=\"card-title mb-0 text-primary\">{{ caseDetail.case ? caseDetail.case.caseName : '' }}</h4>\n                  <div>\n                    <span class=\"badge bg-info me-2\">{{ caseDetail.case ? caseDetail.case.caseType : '' }}</span>\n                    <span class=\"badge\" :class=\"{\n                      'bg-success': caseDetail.case && (caseDetail.case.status === '已完成' || caseDetail.case.status === '已结案'),\n                      'bg-warning': caseDetail.case && caseDetail.case.status === '进行中',\n                      'bg-secondary': caseDetail.case && caseDetail.case.status !== '已完成' && caseDetail.case.status !== '已结案' && caseDetail.case.status !== '进行中'\n                    }\">{{ caseDetail.case ? caseDetail.case.status : '' }}</span>\n                  </div>\n                </div>\n                <div class=\"card-body\">\n                  <div class=\"row\">\n                    <div class=\"col-md-6\">\n                      <div class=\"d-flex mb-2\">\n                        <div class=\"icon-box me-2\"><i class=\"bi bi-hash text-primary\"></i></div>\n                        <div><strong>案件编号:</strong> {{ caseDetail.case ? caseDetail.case.caseNumber : '' }}</div>\n                      </div>\n                      <div class=\"d-flex mb-2\">\n                        <div class=\"icon-box me-2\"><i class=\"bi bi-folder text-warning\"></i></div>\n                        <div><strong>案件类型:</strong> {{ caseDetail.case ? caseDetail.case.caseType : '' }}</div>\n                      </div>\n                      <div class=\"d-flex mb-2\">\n                        <div class=\"icon-box me-2\"><i class=\"bi bi-calendar-date text-success\"></i></div>\n                        <div><strong>立案日期:</strong> {{ caseDetail.case ? formatDate(caseDetail.case.startDate) : '' }}</div>\n                      </div>\n                    </div>\n                    <div class=\"col-md-6\">\n                      <div class=\"d-flex mb-2\">\n                        <div class=\"icon-box me-2\"><i class=\"bi bi-clock-history text-warning\"></i></div>\n                        <div><strong>创建时间:</strong> {{ caseDetail.case ? formatDateTime(caseDetail.case.createdAt) : '' }}</div>\n                      </div>\n                      <div class=\"d-flex mb-2\">\n                        <div class=\"icon-box me-2\"><i class=\"bi bi-card-text text-info\"></i></div>\n                        <div><strong>笔录数量:</strong> {{ caseDetail.records ? caseDetail.records.length : 0 }}</div>\n                      </div>\n                      <div v-if=\"caseDetail.case && caseDetail.case.endDate\" class=\"d-flex mb-2\">\n                        <div class=\"icon-box me-2\"><i class=\"bi bi-calendar-check text-danger\"></i></div>\n                        <div><strong>结案日期:</strong> {{ formatDate(caseDetail.case.endDate) }}</div>\n                      </div>\n                    </div>\n                  </div>\n                  \n                  <div v-if=\"caseDetail.case && caseDetail.case.description\" class=\"mt-3\">\n                    <strong>案件描述:</strong>\n                    <p class=\"text-muted\">{{ caseDetail.case.description }}</p>\n                  </div>\n                </div>\n              </div>\n              \n              <!-- 相关笔录列表 -->\n              <div class=\"card shadow-sm\">\n                <div class=\"card-header bg-gradient\">\n                  <h4 class=\"card-title mb-0\">相关笔录</h4>\n                </div>\n                <div class=\"card-body\">\n                  <div v-if=\"!caseDetail.records || caseDetail.records.length === 0\" class=\"text-center py-3\">\n                    <i class=\"bi bi-info-circle text-info\" style=\"font-size: 2rem;\"></i>\n                    <p class=\"mt-2 text-muted\">暂无相关笔录记录</p>\n                  </div>\n                  <div v-else class=\"table-responsive\">\n                    <table class=\"table table-hover\">\n                      <thead class=\"table-light\">\n                        <tr>\n                          <th>笔录名称</th>\n                          <th>询问时间</th>\n                          <th>询问地点</th>\n                          <th>询问员</th>\n                          <th>被询问人</th>\n                          <th>操作</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        <tr v-for=\"record in caseDetail.records\" :key=\"record.id\">\n                          <td>{{ record.recordName }}</td>\n                          <td>{{ formatDateTime(record.inquiryTime) }}</td>\n                          <td>{{ record.inquiryAddress }}</td>\n                          <td>{{ record.assistantName }}</td>\n                          <td>{{ record.inquirerName }}</td>\n                          <td>\n                            <button class=\"btn btn-sm btn-outline-primary\">\n                              <i class=\"bi bi-eye me-1\"></i>查看\n                            </button>\n                          </td>\n                        </tr>\n                      </tbody>\n                    </table>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">\n              <i class=\"bi bi-x-circle me-2\"></i>关闭\n            </button>\n            <button type=\"button\" class=\"btn btn-primary\" @click=\"packageCaseRecords\" :disabled=\"!caseDetail.case || !caseDetail.records || caseDetail.records.length === 0\">\n              <i class=\"bi bi-archive me-2\"></i>打包笔录\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, reactive, computed, onMounted } from 'vue'\nimport { Modal } from 'bootstrap'\nimport { getCaseList, searchCases, getCaseDetail, addCase, updateCase, deleteCase as deleteCaseApi, packageCase, getCaseStatistics } from '../api/case'\n\nexport default {\n  name: 'CaseManagement',\n  setup() {\n    // 状态变量\n    const loading = ref(false)\n    const detailLoading = ref(false)\n    const statisticsLoading = ref(false)\n    const submitting = ref(false)\n    const showAdvancedSearch = ref(false)\n    const cases = ref([])\n    const caseTypes = ref([])\n    const statusChoices = ref([])\n    const selectedCase = ref(null)\n    const caseDetail = ref({ case: null, records: [] })\n    const statistics = ref({\n      totalCases: 0,\n      criminalCases: 0,\n      civilCases: 0,\n      administrativeCases: 0,\n      investigatingCases: 0,\n      inTrialCases: 0,\n      closedCases: 0\n    })\n    \n    // 分页相关\n    const currentPage = ref(1)\n    const pageSize = ref(10)\n    const totalItems = ref(0)\n    const totalPages = ref(0)\n    \n    // 搜索表单\n    const searchForm = reactive({\n      q: '',\n      caseType: '',\n      status: '',\n      startDateFrom: '',\n      startDateTo: '',\n      createdAtFrom: '',\n      createdAtTo: '',\n      sortBy: 'createdAt_desc',\n      page: 1,\n      size: 10\n    })\n    \n    // 案件表单\n    const caseForm = reactive({\n      id: null,\n      caseName: '',\n      caseType: '',\n      status: '',\n      caseNumber: '',\n      startDate: '',\n      endDate: '',\n      description: ''\n    })\n    \n    // 模态框实例\n    let addCaseModalInstance = null\n    let editCaseModalInstance = null\n    let deleteCaseModalInstance = null\n    let caseDetailModalInstance = null\n    \n    // 计算属性：显示的页码\n    const displayedPages = computed(() => {\n      const pages = []\n      const maxVisiblePages = 5\n      \n      if (totalPages.value <= maxVisiblePages) {\n        // 如果总页数小于等于最大可见页数，显示所有页码\n        for (let i = 1; i <= totalPages.value; i++) {\n          pages.push(i)\n        }\n      } else {\n        // 否则，显示当前页附近的页码\n        let startPage = Math.max(currentPage.value - Math.floor(maxVisiblePages / 2), 1)\n        let endPage = startPage + maxVisiblePages - 1\n        \n        if (endPage > totalPages.value) {\n          endPage = totalPages.value\n          startPage = Math.max(endPage - maxVisiblePages + 1, 1)\n        }\n        \n        for (let i = startPage; i <= endPage; i++) {\n          pages.push(i)\n        }\n      }\n      \n      return pages\n    })\n    \n    // 初始化模态框\n    const initModals = () => {\n      addCaseModalInstance = new Modal(document.getElementById('addCaseModal'))\n      editCaseModalInstance = new Modal(document.getElementById('editCaseModal'))\n      deleteCaseModalInstance = new Modal(document.getElementById('deleteCaseModal'))\n      caseDetailModalInstance = new Modal(document.getElementById('caseDetailModal'))\n    }\n    \n    // 加载案件列表\n    const loadCases = async () => {\n      loading.value = true\n      try {\n        const response = await getCaseList()\n        if (response.data.code === 200) {\n          cases.value = response.data.data || []\n        } else {\n          console.error('加载案件列表失败:', response.data.msg)\n        }\n      } catch (error) {\n        console.error('加载案件列表失败:', error)\n      } finally {\n        loading.value = false\n      }\n    }\n    \n    // 搜索案件\n    const searchCasesData = async () => {\n      loading.value = true\n      try {\n        // 构建搜索参数\n        const params = { ...searchForm }\n        \n        // 处理排序\n        if (params.sortBy) {\n          const [field, order] = params.sortBy.split('_')\n          params.sortField = field\n          params.sortOrder = order\n          delete params.sortBy\n        }\n        \n        const response = await searchCases(params)\n        if (response.data.code === 200) {\n          const result = response.data.data\n          cases.value = result.records || []\n          totalItems.value = result.total || 0\n          totalPages.value = result.pages || 0\n          currentPage.value = result.current || 1\n          \n          // 获取案件类型和状态选项\n          if (result.extra) {\n            caseTypes.value = result.extra.caseTypes || []\n            statusChoices.value = result.extra.statusChoices || []\n          }\n        } else {\n          console.error('搜索案件失败:', response.data.msg)\n        }\n      } catch (error) {\n        console.error('搜索案件失败:', error)\n      } finally {\n        loading.value = false\n      }\n    }\n    \n    // 重置搜索表单\n    const resetSearch = () => {\n      Object.keys(searchForm).forEach(key => {\n        if (key !== 'page' && key !== 'size' && key !== 'sortBy') {\n          searchForm[key] = ''\n        }\n      })\n      searchForm.page = 1\n      searchForm.sortBy = 'createdAt_desc'\n      searchCasesData()\n    }\n    \n    // 切换页码\n    const changePage = (page) => {\n      if (page < 1 || page > totalPages.value || page === currentPage.value) {\n        return\n      }\n      searchForm.page = page\n      searchCasesData()\n    }\n    \n    // 显示添加案件模态框\n    const showAddCaseModal = () => {\n      // 重置表单\n      Object.keys(caseForm).forEach(key => {\n        caseForm[key] = key === 'id' ? null : ''\n      })\n      addCaseModalInstance.show()\n    }\n    \n    // 显示编辑案件模态框\n    const showEditCaseModal = (caseItem) => {\n      // 填充表单\n      Object.keys(caseForm).forEach(key => {\n        if (key === 'id') {\n          caseForm.id = caseItem.id\n        } else if (key === 'startDate' || key === 'endDate') {\n          caseForm[key] = caseItem[key] ? caseItem[key].substring(0, 10) : ''\n        } else {\n          caseForm[key] = caseItem[key] || ''\n        }\n      })\n      editCaseModalInstance.show()\n    }\n    \n    // 确认删除案件\n    const confirmDeleteCase = (caseItem) => {\n      selectedCase.value = caseItem\n      deleteCaseModalInstance.show()\n    }\n    \n    // 查看案件详情\n    const viewCaseDetail = async (caseId) => {\n      detailLoading.value = true\n      caseDetail.value = { case: null, records: [] }\n      caseDetailModalInstance.show()\n      \n      try {\n        const response = await getCaseDetail(caseId)\n        if (response.data.code === 200) {\n          caseDetail.value = response.data.data || { case: null, records: [] }\n        } else {\n          console.error('获取案件详情失败:', response.data.msg)\n        }\n      } catch (error) {\n        console.error('获取案件详情失败:', error)\n      } finally {\n        detailLoading.value = false\n      }\n    }\n    \n    // 提交添加案件\n    const submitAddCase = async () => {\n      // 表单验证\n      if (!caseForm.caseName || !caseForm.caseType || !caseForm.status) {\n        alert('请填写必填字段：案件名称、案件类型和案件状态')\n        return\n      }\n      \n      submitting.value = true\n      try {\n        const response = await addCase(caseForm)\n        if (response.data.code === 200) {\n          alert('案件添加成功')\n          addCaseModalInstance.hide()\n          searchCasesData() // 刷新列表\n        } else {\n          alert(`案件添加失败: ${response.data.msg}`)\n        }\n      } catch (error) {\n        console.error('添加案件失败:', error)\n        alert(`添加案件失败: ${error.message}`)\n      } finally {\n        submitting.value = false\n      }\n    }\n    \n    // 提交编辑案件\n    const submitEditCase = async () => {\n      // 表单验证\n      if (!caseForm.caseName || !caseForm.caseType || !caseForm.status) {\n        alert('请填写必填字段：案件名称、案件类型和案件状态')\n        return\n      }\n      \n      submitting.value = true\n      try {\n        const response = await updateCase(caseForm.id, caseForm)\n        if (response.data.code === 200) {\n          alert('案件更新成功')\n          editCaseModalInstance.hide()\n          searchCasesData() // 刷新列表\n        } else {\n          alert(`案件更新失败: ${response.data.msg}`)\n        }\n      } catch (error) {\n        console.error('更新案件失败:', error)\n        alert(`更新案件失败: ${error.message}`)\n      } finally {\n        submitting.value = false\n      }\n    }\n    \n    // 删除案件\n    const deleteCase = async () => {\n      if (!selectedCase.value || !selectedCase.value.id) {\n        return\n      }\n      \n      submitting.value = true\n      try {\n        const response = await deleteCaseApi(selectedCase.value.id)\n        if (response.data.code === 200) {\n          alert('案件删除成功')\n          deleteCaseModalInstance.hide()\n          searchCasesData() // 刷新列表\n        } else {\n          alert(`案件删除失败: ${response.data.msg}`)\n        }\n      } catch (error) {\n        console.error('删除案件失败:', error)\n        alert(`删除案件失败: ${error.message}`)\n      } finally {\n        submitting.value = false\n      }\n    }\n    \n    // 打包案件笔录\n    const packageCaseRecords = async () => {\n      if (!caseDetail.value.case || !caseDetail.value.case.id) {\n        return\n      }\n      \n      try {\n        const response = await packageCase(caseDetail.value.case.id)\n        // 处理文件下载\n        const blob = new Blob([response.data], { type: response.headers['content-type'] })\n        const link = document.createElement('a')\n        link.href = URL.createObjectURL(blob)\n        \n        // 从响应头获取文件名，如果没有则使用默认名称\n        const contentDisposition = response.headers['content-disposition']\n        let filename = `案件_${caseDetail.value.case.caseNumber}.zip`\n        \n        if (contentDisposition) {\n          const filenameMatch = contentDisposition.match(/filename=\"(.+)\"/);\n          if (filenameMatch && filenameMatch[1]) {\n            filename = decodeURIComponent(filenameMatch[1])\n          }\n        }\n        \n        link.download = filename\n        link.click()\n        URL.revokeObjectURL(link.href)\n      } catch (error) {\n        console.error('打包案件笔录失败:', error)\n        alert('打包案件笔录失败，请稍后重试')\n      }\n    }\n    \n    // 格式化日期\n    const formatDate = (dateString) => {\n      if (!dateString) return ''\n      const date = new Date(dateString)\n      return date.toISOString().split('T')[0]\n    }\n    \n    // 格式化日期时间\n    const formatDateTime = (dateTimeString) => {\n      if (!dateTimeString) return ''\n      const date = new Date(dateTimeString)\n      return `${date.toISOString().split('T')[0]} ${date.toTimeString().split(' ')[0].substring(0, 5)}`\n    }\n    \n    // 截断文本\n    const truncateText = (text, maxLength) => {\n      if (!text) return ''\n      return text.length > maxLength ? text.substring(0, maxLength) + '...' : text\n    }\n    \n    // 加载统计数据\n    const loadStatistics = async () => {\n      statisticsLoading.value = true\n      try {\n        const response = await getCaseStatistics()\n        if (response.data.code === 200) {\n          statistics.value = response.data.data || {\n            totalCases: 0,\n            criminalCases: 0,\n            civilCases: 0,\n            administrativeCases: 0,\n            investigatingCases: 0,\n            inTrialCases: 0,\n            closedCases: 0\n          }\n        } else {\n          console.error('加载统计数据失败:', response.data.msg)\n        }\n      } catch (error) {\n        console.error('加载统计数据失败:', error)\n      } finally {\n        statisticsLoading.value = false\n      }\n    }\n    \n    // 组件挂载时执行\n    onMounted(() => {\n      initModals()\n      searchCasesData()\n      loadStatistics()\n    })\n    \n    return {\n      loading,\n      detailLoading,\n      statisticsLoading,\n      submitting,\n      showAdvancedSearch,\n      cases,\n      caseTypes,\n      statusChoices,\n      selectedCase,\n      caseDetail,\n      statistics,\n      currentPage,\n      pageSize,\n      totalItems,\n      totalPages,\n      displayedPages,\n      searchForm,\n      caseForm,\n      loadCases,\n      searchCases: searchCasesData,\n      resetSearch,\n      changePage,\n      showAddCaseModal,\n      showEditCaseModal,\n      confirmDeleteCase,\n      viewCaseDetail,\n      submitAddCase,\n      submitEditCase,\n      deleteCase,\n      packageCaseRecords,\n      loadStatistics,\n      formatDate,\n      formatDateTime,\n      truncateText\n    }\n  }\n}\n</script>\n\n<style scoped>\n/* 卡片悬停效果 */\n.hover-card {\n  transition: all 0.3s ease;\n  border: none;\n  overflow: hidden;\n  position: relative;\n}\n\n.hover-card:hover {\n  transform: translateY(-5px);\n  box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15) !important;\n}\n\n.hover-card::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 4px;\n  height: 100%;\n  background: linear-gradient(to bottom, #4a6cf7, #2651f0);\n  opacity: 0;\n  transition: opacity 0.3s ease;\n}\n\n.hover-card:hover::before {\n  opacity: 1;\n}\n\n/* 统计图标样式 */\n.stat-icon {\n  opacity: 0.8;\n  transition: all 0.3s ease;\n  filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.1));\n}\n\n.hover-card:hover .stat-icon {\n  transform: scale(1.1);\n  opacity: 1;\n}\n\n/* 统计卡片样式 */\n.stats-card {\n  transition: all 0.3s ease;\n  border-radius: 12px;\n  overflow: hidden;\n  margin-bottom: 1rem;\n}\n\n.stats-card:hover {\n  transform: translateY(-5px);\n  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1) !important;\n}\n\n.stats-icon {\n  width: 48px;\n  height: 48px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 12px;\n  font-size: 1.5rem;\n}\n\n.stats-section-icon {\n  width: 32px;\n  height: 32px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 8px;\n  font-size: 1rem;\n}\n\n.stats-section-title {\n  display: flex;\n  align-items: center;\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: #6c757d;\n  margin-bottom: 0.5rem;\n  padding-left: 0.5rem;\n  border-left: 3px solid #4a6cf7;\n}\n\n/* 图标盒子样式 */\n.icon-box {\n  width: 28px;\n  height: 28px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 50%;\n  background-color: rgba(0, 123, 255, 0.1);\n  color: #0d6efd;\n  transition: all 0.3s ease;\n}\n\n/* 高级搜索面板动画 */\n.advanced-search-panel {\n  animation: fadeIn 0.4s ease-in-out;\n  border-top: 1px solid rgba(0, 0, 0, 0.05);\n  padding-top: 1.5rem;\n  margin-top: 1rem;\n}\n\n@keyframes fadeIn {\n  from { opacity: 0; transform: translateY(-15px); }\n  to { opacity: 1; transform: translateY(0); }\n}\n\n/* 页面标题样式增强 */\n.display-6 {\n  position: relative;\n  padding-bottom: 0.5rem;\n}\n\n.display-6::after {\n  content: '';\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 60px;\n  height: 3px;\n  background: linear-gradient(to right, #4a6cf7, #2651f0);\n  border-radius: 3px;\n}\n\n/* 卡片样式增强 */\n.card {\n  border-radius: 10px;\n  overflow: hidden;\n}\n\n.card-body {\n  padding: 1.5rem;\n}\n\n/* 按钮样式增强 */\n.btn {\n  border-radius: 6px;\n  font-weight: 500;\n  transition: all 0.3s ease;\n}\n\n.btn-primary {\n  background: linear-gradient(to right, #4a6cf7, #2651f0);\n  border: none;\n  box-shadow: 0 4px 10px rgba(74, 108, 247, 0.3);\n}\n\n.btn-primary:hover {\n  background: linear-gradient(to right, #2651f0, #1a3fd9);\n  transform: translateY(-2px);\n  box-shadow: 0 6px 15px rgba(74, 108, 247, 0.4);\n}\n\n.btn-success {\n  background: linear-gradient(to right, #28a745, #20913a);\n  border: none;\n  box-shadow: 0 4px 10px rgba(40, 167, 69, 0.3);\n}\n\n.btn-success:hover {\n  background: linear-gradient(to right, #20913a, #187d2e);\n  transform: translateY(-2px);\n  box-shadow: 0 6px 15px rgba(40, 167, 69, 0.4);\n}\n\n/* 分页控件美化 */\n.pagination .page-link {\n  border-radius: 4px;\n  margin: 0 2px;\n  color: #4a6cf7;\n  border: 1px solid rgba(74, 108, 247, 0.2);\n}\n\n.pagination .page-item.active .page-link {\n  background: linear-gradient(to right, #4a6cf7, #2651f0);\n  border-color: #2651f0;\n}\n\n/* 表单控件美化 */\n.form-control, .form-select {\n  border-radius: 6px;\n  border: 1px solid rgba(0, 0, 0, 0.1);\n  padding: 0.6rem 1rem;\n  transition: all 0.3s ease;\n}\n\n.form-control:focus, .form-select:focus {\n  border-color: #4a6cf7;\n  box-shadow: 0 0 0 0.25rem rgba(74, 108, 247, 0.25);\n}\n\n/* 加载动画美化 */\n.spinner-border {\n  color: #4a6cf7;\n}\n\n/* 案件列表卡片美化 */\n.card.shadow-sm {\n  transition: all 0.3s ease;\n}\n\n.card.shadow-sm:hover {\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1) !important;\n}\n\n/* 统计卡片样式 */\n.stats-card {\n  transition: all 0.3s ease;\n  border-radius: 12px;\n}\n\n.stats-card:hover {\n  transform: translateY(-5px);\n  box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1) !important;\n}\n\n.stats-icon {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  width: 60px;\n  height: 60px;\n  border-radius: 50%;\n  font-size: 24px;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}