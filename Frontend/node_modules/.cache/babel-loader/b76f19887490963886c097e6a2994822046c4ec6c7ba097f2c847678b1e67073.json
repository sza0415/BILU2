{"ast":null,"code":"import { ref, watch, computed } from 'vue';\nimport CaseCard from './CaseCard.vue';\nimport CaseTable from './CaseTable.vue';\nexport default {\n  name: 'CaseList',\n  components: {\n    CaseCard,\n    CaseTable\n  },\n  props: {\n    cases: {\n      type: Array,\n      required: true\n    },\n    loading: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['view-detail', 'add', 'edit', 'delete'],\n  setup(props, {\n    emit\n  }) {\n    const viewMode = ref('card'); // 默认卡片视图\n\n    // 使用计算属性确保始终有一个有效的数组\n    const displayCases = computed(() => {\n      console.log('计算displayCases，原始cases:', props.cases);\n      return Array.isArray(props.cases) ? props.cases : [];\n    });\n\n    // 监听cases属性变化\n    watch(() => props.cases, (newCases, oldCases) => {\n      console.log('CaseList组件检测到cases变化:');\n      console.log('新的cases:', newCases);\n      console.log('旧的cases:', oldCases);\n      console.log('新cases长度:', Array.isArray(newCases) ? newCases.length : 0);\n      console.log('旧cases长度:', Array.isArray(oldCases) ? oldCases.length : 0);\n      console.log('displayCases长度:', displayCases.value.length);\n    }, {\n      deep: true,\n      immediate: true\n    });\n\n    // 设置视图模式\n    const setViewMode = mode => {\n      viewMode.value = mode;\n    };\n\n    // 查看案件详情\n    const viewCaseDetail = id => {\n      emit('view-detail', id);\n    };\n\n    // 添加案件\n    const addCase = () => {\n      emit('add');\n    };\n\n    // 编辑案件\n    const editCase = caseItem => {\n      emit('edit', caseItem);\n    };\n\n    // 确认删除案件\n    const confirmDeleteCase = caseItem => {\n      emit('delete', caseItem);\n    };\n    return {\n      viewMode,\n      displayCases,\n      setViewMode,\n      viewCaseDetail,\n      addCase,\n      editCase,\n      confirmDeleteCase\n    };\n  }\n};","map":{"version":3,"names":["ref","watch","computed","CaseCard","CaseTable","name","components","props","cases","type","Array","required","loading","Boolean","default","emits","setup","emit","viewMode","displayCases","console","log","isArray","newCases","oldCases","length","value","deep","immediate","setViewMode","mode","viewCaseDetail","id","addCase","editCase","caseItem","confirmDeleteCase"],"sources":["/Users/sunziang/IdeaProjects/backend_bilu/bilu_backend2/src/components/case/CaseList.vue"],"sourcesContent":["<template>\n  <div class=\"case-list-container\">\n    <div class=\"card border-0 shadow-sm rounded-3\">\n      <div class=\"card-header bg-white py-3 border-0\">\n        <div class=\"d-flex align-items-center justify-content-between\">\n          <div class=\"d-flex align-items-center\">\n            <i class=\"bi bi-folder2-open fs-4 text-primary me-2\"></i>\n            <h5 class=\"card-title mb-0 fw-bold\">案件列表</h5>\n            <span class=\"badge bg-primary bg-opacity-10 text-primary ms-3\">{{ displayCases.length }}</span>\n            <!-- 添加调试信息 -->\n            <span class=\"ms-3 text-muted small\">(调试信息: 原始数组长度 {{ cases.length }}, 显示数组长度 {{ displayCases.length }})</span>\n          </div>\n          <div class=\"d-flex align-items-center\">\n            <div class=\"btn-group me-2\">\n              <button class=\"btn btn-sm\" :class=\"viewMode === 'card' ? 'btn-primary' : 'btn-outline-primary'\" @click=\"setViewMode('card')\" title=\"卡片视图\">\n                <i class=\"bi bi-grid\"></i>\n              </button>\n              <button class=\"btn btn-sm\" :class=\"viewMode === 'list' ? 'btn-primary' : 'btn-outline-primary'\" @click=\"setViewMode('list')\" title=\"列表视图\">\n                <i class=\"bi bi-list\"></i>\n              </button>\n            </div>\n            <button class=\"btn btn-sm btn-primary\" @click=\"addCase\">\n              <i class=\"bi bi-plus-lg me-1\"></i> 新增案件\n            </button>\n          </div>\n        </div>\n      </div>\n      <div class=\"card-body p-4\">\n        <div v-if=\"loading\" class=\"text-center py-5\">\n          <div class=\"spinner-border text-primary\" role=\"status\">\n            <span class=\"visually-hidden\">加载中...</span>\n          </div>\n          <p class=\"mt-3 text-muted\">正在加载案件数据...</p>\n        </div>\n        <div v-else-if=\"displayCases.length === 0\" class=\"text-center py-5\">\n          <div class=\"empty-state p-4\">\n            <i class=\"bi bi-folder2 text-muted\" style=\"font-size: 4rem;\"></i>\n            <h5 class=\"mt-4\">暂无案件记录</h5>\n            <p class=\"text-muted\">您可以点击\"新增案件\"按钮添加第一个案件</p>\n            <button class=\"btn btn-primary mt-3\" @click=\"addCase\">\n              <i class=\"bi bi-plus-lg me-1\"></i> 新增案件\n            </button>\n          </div>\n        </div>\n        <div v-else>\n          <!-- 卡片视图 -->\n          <div v-if=\"viewMode === 'card'\" class=\"row\">\n            <div v-for=\"(caseItem, index) in displayCases\" :key=\"caseItem.id || index\" class=\"col-md-6 col-lg-4 mb-3\">\n              <case-card \n                :case-item=\"caseItem\" \n                @view-detail=\"viewCaseDetail\" \n                @edit=\"editCase\" \n                @delete=\"confirmDeleteCase\"\n              />\n            </div>\n          </div>\n          \n          <!-- 表格视图 -->\n          <div v-else>\n            <case-table \n              :cases=\"displayCases\" \n              @view-detail=\"viewCaseDetail\" \n              @edit=\"editCase\" \n              @delete=\"confirmDeleteCase\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, watch, computed } from 'vue'\nimport CaseCard from './CaseCard.vue'\nimport CaseTable from './CaseTable.vue'\n\nexport default {\n  name: 'CaseList',\n  components: {\n    CaseCard,\n    CaseTable\n  },\n  props: {\n    cases: {\n      type: Array,\n      required: true\n    },\n    loading: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['view-detail', 'add', 'edit', 'delete'],\n  setup(props, { emit }) {\n    const viewMode = ref('card') // 默认卡片视图\n    \n    // 使用计算属性确保始终有一个有效的数组\n    const displayCases = computed(() => {\n      console.log('计算displayCases，原始cases:', props.cases)\n      return Array.isArray(props.cases) ? props.cases : []\n    })\n    \n    // 监听cases属性变化\n    watch(() => props.cases, (newCases, oldCases) => {\n      console.log('CaseList组件检测到cases变化:')\n      console.log('新的cases:', newCases)\n      console.log('旧的cases:', oldCases)\n      console.log('新cases长度:', Array.isArray(newCases) ? newCases.length : 0)\n      console.log('旧cases长度:', Array.isArray(oldCases) ? oldCases.length : 0)\n      console.log('displayCases长度:', displayCases.value.length)\n    }, { deep: true, immediate: true })\n    \n    // 设置视图模式\n    const setViewMode = (mode) => {\n      viewMode.value = mode\n    }\n    \n    // 查看案件详情\n    const viewCaseDetail = (id) => {\n      emit('view-detail', id)\n    }\n    \n    // 添加案件\n    const addCase = () => {\n      emit('add')\n    }\n    \n    // 编辑案件\n    const editCase = (caseItem) => {\n      emit('edit', caseItem)\n    }\n    \n    // 确认删除案件\n    const confirmDeleteCase = (caseItem) => {\n      emit('delete', caseItem)\n    }\n    \n    return {\n      viewMode,\n      displayCases,\n      setViewMode,\n      viewCaseDetail,\n      addCase,\n      editCase,\n      confirmDeleteCase\n    }\n  }\n}\n</script>\n\n<style scoped>\n.case-list-container {\n  margin-bottom: 2rem;\n}\n\n.empty-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 2rem;\n}\n\n.btn-primary {\n  background: linear-gradient(to right, #4a6cf7, #2651f0);\n  border: none;\n  box-shadow: 0 4px 10px rgba(74, 108, 247, 0.3);\n}\n\n.btn-primary:hover {\n  background: linear-gradient(to right, #2651f0, #1a3fd9);\n  transform: translateY(-2px);\n  box-shadow: 0 6px 15px rgba(74, 108, 247, 0.4);\n}\n\n.btn-outline-primary {\n  color: #4a6cf7;\n  border-color: #4a6cf7;\n}\n\n.btn-outline-primary:hover {\n  background-color: rgba(74, 108, 247, 0.1);\n  color: #2651f0;\n  border-color: #2651f0;\n}\n</style>"],"mappings":"AAyEA,SAASA,GAAG,EAAEC,KAAK,EAAEC,QAAO,QAAS,KAAI;AACzC,OAAOC,QAAO,MAAO,gBAAe;AACpC,OAAOC,SAAQ,MAAO,iBAAgB;AAEtC,eAAe;EACbC,IAAI,EAAE,UAAU;EAChBC,UAAU,EAAE;IACVH,QAAQ;IACRC;EACF,CAAC;EACDG,KAAK,EAAE;IACLC,KAAK,EAAE;MACLC,IAAI,EAAEC,KAAK;MACXC,QAAQ,EAAE;IACZ,CAAC;IACDC,OAAO,EAAE;MACPH,IAAI,EAAEI,OAAO;MACbC,OAAO,EAAE;IACX;EACF,CAAC;EACDC,KAAK,EAAE,CAAC,aAAa,EAAE,KAAK,EAAE,MAAM,EAAE,QAAQ,CAAC;EAC/CC,KAAKA,CAACT,KAAK,EAAE;IAAEU;EAAK,CAAC,EAAE;IACrB,MAAMC,QAAO,GAAIlB,GAAG,CAAC,MAAM,GAAE;;IAE7B;IACA,MAAMmB,YAAW,GAAIjB,QAAQ,CAAC,MAAM;MAClCkB,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAEd,KAAK,CAACC,KAAK;MAClD,OAAOE,KAAK,CAACY,OAAO,CAACf,KAAK,CAACC,KAAK,IAAID,KAAK,CAACC,KAAI,GAAI,EAAC;IACrD,CAAC;;IAED;IACAP,KAAK,CAAC,MAAMM,KAAK,CAACC,KAAK,EAAE,CAACe,QAAQ,EAAEC,QAAQ,KAAK;MAC/CJ,OAAO,CAACC,GAAG,CAAC,uBAAuB;MACnCD,OAAO,CAACC,GAAG,CAAC,UAAU,EAAEE,QAAQ;MAChCH,OAAO,CAACC,GAAG,CAAC,UAAU,EAAEG,QAAQ;MAChCJ,OAAO,CAACC,GAAG,CAAC,WAAW,EAAEX,KAAK,CAACY,OAAO,CAACC,QAAQ,IAAIA,QAAQ,CAACE,MAAK,GAAI,CAAC;MACtEL,OAAO,CAACC,GAAG,CAAC,WAAW,EAAEX,KAAK,CAACY,OAAO,CAACE,QAAQ,IAAIA,QAAQ,CAACC,MAAK,GAAI,CAAC;MACtEL,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEF,YAAY,CAACO,KAAK,CAACD,MAAM;IAC1D,CAAC,EAAE;MAAEE,IAAI,EAAE,IAAI;MAAEC,SAAS,EAAE;IAAK,CAAC;;IAElC;IACA,MAAMC,WAAU,GAAKC,IAAI,IAAK;MAC5BZ,QAAQ,CAACQ,KAAI,GAAII,IAAG;IACtB;;IAEA;IACA,MAAMC,cAAa,GAAKC,EAAE,IAAK;MAC7Bf,IAAI,CAAC,aAAa,EAAEe,EAAE;IACxB;;IAEA;IACA,MAAMC,OAAM,GAAIA,CAAA,KAAM;MACpBhB,IAAI,CAAC,KAAK;IACZ;;IAEA;IACA,MAAMiB,QAAO,GAAKC,QAAQ,IAAK;MAC7BlB,IAAI,CAAC,MAAM,EAAEkB,QAAQ;IACvB;;IAEA;IACA,MAAMC,iBAAgB,GAAKD,QAAQ,IAAK;MACtClB,IAAI,CAAC,QAAQ,EAAEkB,QAAQ;IACzB;IAEA,OAAO;MACLjB,QAAQ;MACRC,YAAY;MACZU,WAAW;MACXE,cAAc;MACdE,OAAO;MACPC,QAAQ;MACRE;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}