{"ast":null,"code":"import { computed } from 'vue';\nimport { getCaseStatistics } from '@/api/case';\nexport default {\n  name: 'CaseStatistics',\n  props: {\n    statistics: {\n      type: Object,\n      default: () => ({\n        totalCases: 0,\n        criminalCases: 0,\n        civilCases: 0,\n        administrativeCases: 0,\n        investigatingCases: 0,\n        inTrialCases: 0,\n        closedCases: 0\n      })\n    },\n    loading: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup(props) {\n    // 使用计算属性来处理父组件传递的数据\n    const statisticsLoading = computed(() => props.loading);\n\n    // 加载统计数据的方法保留，以便组件可以独立使用\n    const loadStatistics = async () => {\n      // 此方法现在仅在组件独立使用时才会被调用\n      try {\n        const response = await getCaseStatistics();\n        if (response.data.code === 200) {\n          // 这里不再直接修改 statistics，因为它现在是从父组件传递的\n          console.log('统计数据已加载，但不会更新组件状态，因为使用的是父组件传递的数据');\n          return response.data.data || {\n            totalCases: 0,\n            criminalCases: 0,\n            civilCases: 0,\n            administrativeCases: 0,\n            investigatingCases: 0,\n            inTrialCases: 0,\n            closedCases: 0\n          };\n        } else {\n          console.error('加载统计数据失败:', response.data.msg);\n          return null;\n        }\n      } catch (error) {\n        console.error('加载统计数据失败:', error);\n        return null;\n      }\n    };\n\n    // 组件挂载时不再自动加载统计数据，因为数据由父组件提供\n    // 如果需要在组件独立使用时加载数据，可以取消下面的注释\n    // onMounted(() => {\n    //   if (!props.statistics || Object.keys(props.statistics).length === 0) {\n    //     loadStatistics()\n    //   }\n    // })\n\n    // 直接返回 props 中的 statistics，不需要额外的计算属性\n    return {\n      statisticsLoading,\n      loadStatistics\n    };\n  }\n};","map":{"version":3,"names":["computed","getCaseStatistics","name","props","statistics","type","Object","default","totalCases","criminalCases","civilCases","administrativeCases","investigatingCases","inTrialCases","closedCases","loading","Boolean","setup","statisticsLoading","loadStatistics","response","data","code","console","log","error","msg"],"sources":["/Users/sunziang/BILU2/Frontend/src/components/case/CaseStatistics.vue"],"sourcesContent":["<template>\n  <div class=\"row stats-cards\">\n    <!-- 总案件数 -->\n    <div class=\"stats-card-wrapper\">\n      <div class=\"card border-0 shadow-sm stats-card\">\n        <div class=\"card-body\">\n          <div class=\"d-flex align-items-center\">\n            <div class=\"stats-icon bg-primary bg-opacity-10 text-primary\">\n              <i class=\"bi bi-folder2\"></i>\n            </div>\n            <div class=\"ms-3\">\n              <h3 class=\"fw-bold mb-0\">{{ statistics.totalCases || 0 }}</h3>\n              <p class=\"text-muted mb-0\">总案件数</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    \n    <!-- 刑事案件 -->\n    <div class=\"stats-card-wrapper\">\n      <div class=\"card border-0 shadow-sm stats-card\">\n        <div class=\"card-body\">\n          <div class=\"d-flex align-items-center\">\n            <div class=\"stats-icon bg-danger bg-opacity-10 text-danger\">\n              <i class=\"bi bi-shield-lock\"></i>\n            </div>\n            <div class=\"ms-3\">\n              <h3 class=\"fw-bold mb-0\">{{ statistics.criminalCases || 0 }}</h3>\n              <p class=\"text-muted mb-0\">刑事案件</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    \n    <!-- 民事案件 -->\n    <div class=\"stats-card-wrapper\">\n      <div class=\"card border-0 shadow-sm stats-card\">\n        <div class=\"card-body\">\n          <div class=\"d-flex align-items-center\">\n            <div class=\"stats-icon bg-success bg-opacity-10 text-success\">\n              <i class=\"bi bi-people\"></i>\n            </div>\n            <div class=\"ms-3\">\n              <h3 class=\"fw-bold mb-0\">{{ statistics.civilCases || 0 }}</h3>\n              <p class=\"text-muted mb-0\">民事案件</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    \n    <!-- 行政案件 -->\n    <div class=\"stats-card-wrapper\">\n      <div class=\"card border-0 shadow-sm stats-card\">\n        <div class=\"card-body\">\n          <div class=\"d-flex align-items-center\">\n            <div class=\"stats-icon bg-info bg-opacity-10 text-info\">\n              <i class=\"bi bi-building\"></i>\n            </div>\n            <div class=\"ms-3\">\n              <h3 class=\"fw-bold mb-0\">{{ statistics.administrativeCases || 0 }}</h3>\n              <p class=\"text-muted mb-0\">行政案件</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    \n    <!-- 调查中 -->\n    <div class=\"stats-card-wrapper\">\n      <div class=\"card border-0 shadow-sm stats-card\">\n        <div class=\"card-body\">\n          <div class=\"d-flex align-items-center\">\n            <div class=\"stats-icon bg-warning bg-opacity-10 text-warning\">\n              <i class=\"bi bi-search\"></i>\n            </div>\n            <div class=\"ms-3\">\n              <h3 class=\"fw-bold mb-0\">{{ statistics.investigatingCases || 0 }}</h3>\n              <p class=\"text-muted mb-0\">调查中</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    \n    <!-- 审理中 -->\n    <div class=\"stats-card-wrapper\">\n      <div class=\"card border-0 shadow-sm stats-card\">\n        <div class=\"card-body\">\n          <div class=\"d-flex align-items-center\">\n            <div class=\"stats-icon bg-secondary bg-opacity-10 text-secondary\">\n              <i class=\"bi bi-hourglass-split\"></i>\n            </div>\n            <div class=\"ms-3\">\n              <h3 class=\"fw-bold mb-0\">{{ statistics.inTrialCases || 0 }}</h3>\n              <p class=\"text-muted mb-0\">审理中</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    \n    <!-- 已结案 -->\n    <div class=\"stats-card-wrapper\">\n      <div class=\"card border-0 shadow-sm stats-card\">\n        <div class=\"card-body\">\n          <div class=\"d-flex align-items-center\">\n            <div class=\"stats-icon bg-dark bg-opacity-10 text-dark\">\n              <i class=\"bi bi-check2-circle\"></i>\n            </div>\n            <div class=\"ms-3\">\n              <h3 class=\"fw-bold mb-0\">{{ statistics.closedCases || 0 }}</h3>\n              <p class=\"text-muted mb-0\">已结案</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { computed } from 'vue'\nimport { getCaseStatistics } from '@/api/case'\n\nexport default {\n  name: 'CaseStatistics',\n  props: {\n    statistics: {\n      type: Object,\n      default: () => ({\n        totalCases: 0,\n        criminalCases: 0,\n        civilCases: 0,\n        administrativeCases: 0,\n        investigatingCases: 0,\n        inTrialCases: 0,\n        closedCases: 0\n      })\n    },\n    loading: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup(props) {\n    // 使用计算属性来处理父组件传递的数据\n    const statisticsLoading = computed(() => props.loading)\n    \n    // 加载统计数据的方法保留，以便组件可以独立使用\n    const loadStatistics = async () => {\n      // 此方法现在仅在组件独立使用时才会被调用\n      try {\n        const response = await getCaseStatistics()\n        if (response.data.code === 200) {\n          // 这里不再直接修改 statistics，因为它现在是从父组件传递的\n          console.log('统计数据已加载，但不会更新组件状态，因为使用的是父组件传递的数据')\n          return response.data.data || {\n            totalCases: 0,\n            criminalCases: 0,\n            civilCases: 0,\n            administrativeCases: 0,\n            investigatingCases: 0,\n            inTrialCases: 0,\n            closedCases: 0\n          }\n        } else {\n          console.error('加载统计数据失败:', response.data.msg)\n          return null\n        }\n      } catch (error) {\n        console.error('加载统计数据失败:', error)\n        return null\n      }\n    }\n    \n    // 组件挂载时不再自动加载统计数据，因为数据由父组件提供\n    // 如果需要在组件独立使用时加载数据，可以取消下面的注释\n    // onMounted(() => {\n    //   if (!props.statistics || Object.keys(props.statistics).length === 0) {\n    //     loadStatistics()\n    //   }\n    // })\n    \n    // 直接返回 props 中的 statistics，不需要额外的计算属性\n    return {\n      statisticsLoading,\n      loadStatistics\n    }\n  }\n}\n</script>\n\n<style scoped>\n.stats-cards {\n  display: flex;\n  flex-wrap: wrap;\n  margin: 0 -10px;\n}\n\n.stats-card-wrapper {\n  flex: 0 0 calc(25% - 20px);\n  padding: 0 10px;\n  margin-bottom: 20px;\n}\n\n.stats-card {\n  transition: all 0.3s ease;\n  border-radius: 10px;\n  overflow: hidden;\n}\n\n.stats-card:hover {\n  transform: translateY(-5px);\n  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1) !important;\n}\n\n.stats-icon {\n  width: 48px;\n  height: 48px;\n  border-radius: 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.5rem;\n}\n\n@media (max-width: 1200px) {\n  .stats-card-wrapper {\n    flex: 0 0 calc(33.333% - 20px);\n  }\n}\n\n@media (max-width: 992px) {\n  .stats-card-wrapper {\n    flex: 0 0 calc(50% - 20px);\n  }\n}\n\n@media (max-width: 576px) {\n  .stats-card-wrapper {\n    flex: 0 0 calc(100% - 20px);\n  }\n}\n</style>"],"mappings":"AA4HA,SAASA,QAAO,QAAS,KAAI;AAC7B,SAASC,iBAAgB,QAAS,YAAW;AAE7C,eAAe;EACbC,IAAI,EAAE,gBAAgB;EACtBC,KAAK,EAAE;IACLC,UAAU,EAAE;MACVC,IAAI,EAAEC,MAAM;MACZC,OAAO,EAAEA,CAAA,MAAO;QACdC,UAAU,EAAE,CAAC;QACbC,aAAa,EAAE,CAAC;QAChBC,UAAU,EAAE,CAAC;QACbC,mBAAmB,EAAE,CAAC;QACtBC,kBAAkB,EAAE,CAAC;QACrBC,YAAY,EAAE,CAAC;QACfC,WAAW,EAAE;MACf,CAAC;IACH,CAAC;IACDC,OAAO,EAAE;MACPV,IAAI,EAAEW,OAAO;MACbT,OAAO,EAAE;IACX;EACF,CAAC;EACDU,KAAKA,CAACd,KAAK,EAAE;IACX;IACA,MAAMe,iBAAgB,GAAIlB,QAAQ,CAAC,MAAMG,KAAK,CAACY,OAAO;;IAEtD;IACA,MAAMI,cAAa,GAAI,MAAAA,CAAA,KAAY;MACjC;MACA,IAAI;QACF,MAAMC,QAAO,GAAI,MAAMnB,iBAAiB,CAAC;QACzC,IAAImB,QAAQ,CAACC,IAAI,CAACC,IAAG,KAAM,GAAG,EAAE;UAC9B;UACAC,OAAO,CAACC,GAAG,CAAC,kCAAkC;UAC9C,OAAOJ,QAAQ,CAACC,IAAI,CAACA,IAAG,IAAK;YAC3Bb,UAAU,EAAE,CAAC;YACbC,aAAa,EAAE,CAAC;YAChBC,UAAU,EAAE,CAAC;YACbC,mBAAmB,EAAE,CAAC;YACtBC,kBAAkB,EAAE,CAAC;YACrBC,YAAY,EAAE,CAAC;YACfC,WAAW,EAAE;UACf;QACF,OAAO;UACLS,OAAO,CAACE,KAAK,CAAC,WAAW,EAAEL,QAAQ,CAACC,IAAI,CAACK,GAAG;UAC5C,OAAO,IAAG;QACZ;MACF,EAAE,OAAOD,KAAK,EAAE;QACdF,OAAO,CAACE,KAAK,CAAC,WAAW,EAAEA,KAAK;QAChC,OAAO,IAAG;MACZ;IACF;;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA;IACA,OAAO;MACLP,iBAAiB;MACjBC;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}