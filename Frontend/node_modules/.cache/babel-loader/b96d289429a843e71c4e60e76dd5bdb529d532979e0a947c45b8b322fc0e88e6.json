{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport { ref, reactive, watch } from 'vue';\nexport default {\n  name: 'CaseSearch',\n  props: {\n    caseTypes: {\n      type: Array,\n      default: () => []\n    },\n    searchForm: {\n      type: Object,\n      default: () => ({})\n    },\n    showAdvancedSearch: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['search', 'reset', 'toggle-advanced'],\n  setup(props, {\n    emit\n  }) {\n    // 使用传入的props初始化本地状态\n    const advancedSearchVisible = ref(props.showAdvancedSearch);\n\n    // 将父组件传入的searchForm.q映射到本地的keyword\n    console.log('初始化formData，props.searchForm:', props.searchForm);\n    const formData = reactive({\n      keyword: props.searchForm?.q || '',\n      caseType: props.searchForm?.caseType || '',\n      status: props.searchForm?.status || '',\n      startDateFrom: props.searchForm?.startDateFrom || '',\n      startDateTo: props.searchForm?.startDateTo || '',\n      createdAtFrom: props.searchForm?.createdAtFrom || '',\n      createdAtTo: props.searchForm?.createdAtTo || '',\n      page: props.searchForm?.page || 1,\n      size: props.searchForm?.size || 10,\n      sortBy: props.searchForm?.sortBy || 'createdAt,desc'\n    });\n\n    // 监听props.searchForm的变化，同步更新本地formData\n    watch(() => props.searchForm, newSearchForm => {\n      if (newSearchForm) {\n        console.log('props.searchForm变化，更新formData:', newSearchForm);\n        formData.keyword = newSearchForm.q || '';\n        formData.caseType = newSearchForm.caseType || '';\n        formData.status = newSearchForm.status || '';\n        formData.startDateFrom = newSearchForm.startDateFrom || '';\n        formData.startDateTo = newSearchForm.startDateTo || '';\n        formData.createdAtFrom = newSearchForm.createdAtFrom || '';\n        formData.createdAtTo = newSearchForm.createdAtTo || '';\n      }\n    }, {\n      deep: true\n    });\n    console.log('初始化后的formData:', formData);\n\n    // 切换高级搜索面板\n    const toggleAdvancedSearch = () => {\n      advancedSearchVisible.value = !advancedSearchVisible.value;\n      emit('toggle-advanced', advancedSearchVisible.value);\n    };\n\n    // 搜索案件\n    const searchCases = () => {\n      console.log('搜索按钮被点击，发送数据:', {\n        ...formData\n      });\n      // 检查formData对象\n      console.log('formData对象属性:', Object.keys(formData));\n      console.log('formData.keyword值:', formData.keyword);\n      formData.page = 1; // 重置页码\n      const dataToEmit = {\n        ...formData\n      };\n      console.log('准备发送的数据:', dataToEmit);\n      emit('search', dataToEmit);\n    };\n\n    // 重置搜索表单\n    const resetSearch = () => {\n      Object.keys(formData).forEach(key => {\n        if (key !== 'page' && key !== 'size' && key !== 'sortBy') {\n          formData[key] = '';\n        }\n      });\n      formData.page = 1;\n      emit('reset', {\n        ...formData\n      });\n    };\n\n    // 返回组件需要的数据和方法\n    return {\n      // 使用不同的变量名，避免与props冲突\n      advancedSearchVisible,\n      formData,\n      toggleAdvancedSearch,\n      searchCases,\n      resetSearch\n    };\n  }\n};","map":{"version":3,"names":["ref","reactive","watch","name","props","caseTypes","type","Array","default","searchForm","Object","showAdvancedSearch","Boolean","emits","setup","emit","advancedSearchVisible","console","log","formData","keyword","q","caseType","status","startDateFrom","startDateTo","createdAtFrom","createdAtTo","page","size","sortBy","newSearchForm","deep","toggleAdvancedSearch","value","searchCases","keys","dataToEmit","resetSearch","forEach","key"],"sources":["/Users/sunziang/IdeaProjects/backend_bilu/bilu_backend2/src/components/case/CaseSearch.vue"],"sourcesContent":["<template>\n  <div class=\"search-section mb-4\">\n    <div class=\"card border-0 shadow-sm rounded-3\">\n      <div class=\"card-body p-4\">\n        <div class=\"row g-3 align-items-center\">\n          <div class=\"col-md-4\">\n            <div class=\"input-group\">\n              <span class=\"input-group-text bg-light border-0\">\n                <i class=\"bi bi-search text-muted\"></i>\n              </span>\n              <input \n                type=\"text\" \n                class=\"form-control border-0 bg-light\" \n                placeholder=\"搜索案件名称、编号或描述\" \n                v-model=\"formData.keyword\"\n                @keyup.enter=\"searchCases\"\n              >\n            </div>\n          </div>\n          <div class=\"col-md-3\">\n            <select class=\"form-select shadow-sm\" v-model=\"formData.status\">\n              <option value=\"\">全部状态</option>\n              <option value=\"调查中\">调查中</option>\n              <option value=\"审理中\">审理中</option>\n              <option value=\"已结案\">已结案</option>\n            </select>\n          </div>\n          <div class=\"col-md-3\">\n            <div class=\"d-flex\">\n              <button class=\"btn btn-primary w-100\" @click=\"searchCases\">\n                <i class=\"bi bi-search me-2\"></i>搜索\n              </button>\n            </div>\n          </div>\n          <div class=\"col-md-2 text-end\">\n            <button class=\"btn btn-outline-secondary w-100\" @click=\"toggleAdvancedSearch\">\n              <i class=\"bi\" :class=\"advancedSearchVisible ? 'bi-chevron-up' : 'bi-chevron-down'\"></i>\n              {{ advancedSearchVisible ? '收起' : '展开' }}高级搜索选项\n            </button>\n          </div>\n        </div>\n\n        <!-- 高级搜索 -->\n        <div v-show=\"advancedSearchVisible\" class=\"advanced-search-panel\">\n          <div class=\"p-4 bg-light rounded-3 border border-light mt-3\">\n            <h6 class=\"fw-bold mb-3 d-flex align-items-center\">\n              <span class=\"badge bg-primary me-2\"><i class=\"bi bi-funnel-fill\"></i></span>高级搜索选项\n            </h6>\n            <div class=\"row g-3\">\n              <div class=\"col-md-3\">\n                <label class=\"form-label\">案件类型</label>\n                <select class=\"form-select shadow-sm\" v-model=\"formData.caseType\">\n                  <option value=\"\">全部类型</option>\n                  <option v-for=\"type in caseTypes\" :key=\"type\" :value=\"type\">{{ type }}</option>\n                </select>\n              </div>\n              <div class=\"col-md-3\">\n                <label class=\"form-label\">立案日期（从）</label>\n                <input type=\"date\" class=\"form-control shadow-sm\" v-model=\"formData.startDateFrom\">\n              </div>\n              <div class=\"col-md-3\">\n                <label class=\"form-label\">立案日期（至）</label>\n                <input type=\"date\" class=\"form-control shadow-sm\" v-model=\"formData.startDateTo\">\n              </div>\n              <div class=\"col-md-3\">\n                <label class=\"form-label\">创建日期（从）</label>\n                <input type=\"date\" class=\"form-control shadow-sm\" v-model=\"formData.createdAtFrom\">\n              </div>\n              <div class=\"col-md-3\">\n                <label class=\"form-label\">创建日期（至）</label>\n                <input type=\"date\" class=\"form-control shadow-sm\" v-model=\"formData.createdAtTo\">\n              </div>\n              <div class=\"col-12 text-end mt-4\">\n                <button class=\"btn btn-outline-secondary me-2\" @click=\"resetSearch\">\n                  <i class=\"bi bi-arrow-counterclockwise me-2\"></i>重置\n                </button>\n                <button class=\"btn btn-primary px-4\" @click=\"searchCases\">\n                  <i class=\"bi bi-search me-2\"></i>搜索\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, reactive, watch } from 'vue'\n\nexport default {\n  name: 'CaseSearch',\n  props: {\n    caseTypes: {\n      type: Array,\n      default: () => []\n    },\n    searchForm: {\n      type: Object,\n      default: () => ({})\n    },\n    showAdvancedSearch: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['search', 'reset', 'toggle-advanced'],\n  setup(props, { emit }) {\n    // 使用传入的props初始化本地状态\n    const advancedSearchVisible = ref(props.showAdvancedSearch)\n    \n    // 将父组件传入的searchForm.q映射到本地的keyword\n    console.log('初始化formData，props.searchForm:', props.searchForm)\n    const formData = reactive({\n      keyword: props.searchForm?.q || '',\n      caseType: props.searchForm?.caseType || '',\n      status: props.searchForm?.status || '',\n      startDateFrom: props.searchForm?.startDateFrom || '',\n      startDateTo: props.searchForm?.startDateTo || '',\n      createdAtFrom: props.searchForm?.createdAtFrom || '',\n      createdAtTo: props.searchForm?.createdAtTo || '',\n      page: props.searchForm?.page || 1,\n      size: props.searchForm?.size || 10,\n      sortBy: props.searchForm?.sortBy || 'createdAt,desc'\n    })\n    \n    // 监听props.searchForm的变化，同步更新本地formData\n    watch(() => props.searchForm, (newSearchForm) => {\n      if (newSearchForm) {\n        console.log('props.searchForm变化，更新formData:', newSearchForm)\n        formData.keyword = newSearchForm.q || ''\n        formData.caseType = newSearchForm.caseType || ''\n        formData.status = newSearchForm.status || ''\n        formData.startDateFrom = newSearchForm.startDateFrom || ''\n        formData.startDateTo = newSearchForm.startDateTo || ''\n        formData.createdAtFrom = newSearchForm.createdAtFrom || ''\n        formData.createdAtTo = newSearchForm.createdAtTo || ''\n      }\n    }, { deep: true })\n    \n    console.log('初始化后的formData:', formData)\n    \n    // 切换高级搜索面板\n    const toggleAdvancedSearch = () => {\n      advancedSearchVisible.value = !advancedSearchVisible.value\n      emit('toggle-advanced', advancedSearchVisible.value)\n    }\n    \n    // 搜索案件\n    const searchCases = () => {\n      console.log('搜索按钮被点击，发送数据:', { ...formData })\n      // 检查formData对象\n      console.log('formData对象属性:', Object.keys(formData))\n      console.log('formData.keyword值:', formData.keyword)\n      \n      formData.page = 1 // 重置页码\n      const dataToEmit = { ...formData }\n      console.log('准备发送的数据:', dataToEmit)\n      emit('search', dataToEmit)\n    }\n    \n    // 重置搜索表单\n    const resetSearch = () => {\n      Object.keys(formData).forEach(key => {\n        if (key !== 'page' && key !== 'size' && key !== 'sortBy') {\n          formData[key] = ''\n        }\n      })\n      formData.page = 1\n      emit('reset', { ...formData })\n    }\n    \n    // 返回组件需要的数据和方法\n    return {\n      // 使用不同的变量名，避免与props冲突\n      advancedSearchVisible,\n      formData,\n      toggleAdvancedSearch,\n      searchCases,\n      resetSearch\n    }\n  }\n}\n</script>\n\n<style scoped>\n.search-section {\n  margin-bottom: 1.5rem;\n}\n\n.advanced-search-panel {\n  margin-top: 1rem;\n}\n\n.form-control, .form-select {\n  border-radius: 6px;\n  border: 1px solid rgba(0, 0, 0, 0.1);\n  padding: 0.6rem 1rem;\n  transition: all 0.3s ease;\n}\n\n.form-control:focus, .form-select:focus {\n  border-color: #4a6cf7;\n  box-shadow: 0 0 0 0.25rem rgba(74, 108, 247, 0.25);\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}