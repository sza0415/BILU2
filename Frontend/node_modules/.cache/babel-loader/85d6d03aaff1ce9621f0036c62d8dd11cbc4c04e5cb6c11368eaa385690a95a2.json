{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, vModelSelect as _vModelSelect, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"record-edit\"\n};\nconst _hoisted_2 = {\n  class: \"container-fluid py-3\"\n};\nconst _hoisted_3 = {\n  key: 0,\n  class: \"d-flex justify-content-center align-items-center\",\n  style: {\n    \"min-height\": \"300px\"\n  }\n};\nconst _hoisted_4 = {\n  class: \"row justify-content-center\"\n};\nconst _hoisted_5 = {\n  class: \"col-md-10 col-lg-8\"\n};\nconst _hoisted_6 = {\n  class: \"card shadow-sm\"\n};\nconst _hoisted_7 = {\n  class: \"card-header bg-primary bg-gradient text-white\"\n};\nconst _hoisted_8 = {\n  class: \"mb-0\"\n};\nconst _hoisted_9 = {\n  class: \"card-body\"\n};\nconst _hoisted_10 = {\n  key: 0,\n  class: \"alert alert-warning\"\n};\nconst _hoisted_11 = {\n  class: \"mb-3\"\n};\nconst _hoisted_12 = {\n  class: \"row\"\n};\nconst _hoisted_13 = {\n  class: \"col-md-6 mb-3\"\n};\nconst _hoisted_14 = {\n  class: \"col-md-6 mb-3\"\n};\nconst _hoisted_15 = {\n  class: \"row\"\n};\nconst _hoisted_16 = {\n  class: \"col-md-6 mb-3\"\n};\nconst _hoisted_17 = {\n  class: \"col-md-6 mb-3\"\n};\nconst _hoisted_18 = {\n  class: \"mb-3\"\n};\nconst _hoisted_19 = [\"value\"];\nconst _hoisted_20 = {\n  class: \"mb-3\"\n};\nconst _hoisted_21 = {\n  class: \"mb-3\"\n};\nconst _hoisted_22 = {\n  key: 0,\n  class: \"form-text\"\n};\nconst _hoisted_23 = {\n  key: 0,\n  class: \"alert alert-danger\"\n};\nconst _hoisted_24 = {\n  class: \"d-flex justify-content-end gap-2 mt-4\"\n};\nconst _hoisted_25 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createCommentVNode(\" 加载状态 \"), $data.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, _cache[10] || (_cache[10] = [_createElementVNode(\"div\", {\n    class: \"spinner-border text-primary\",\n    role: \"status\"\n  }, [_createElementVNode(\"span\", {\n    class: \"visually-hidden\"\n  }, \"加载中...\")], -1 /* CACHED */)]))) : (_openBlock(), _createElementBlock(_Fragment, {\n    key: 1\n  }, [_createCommentVNode(\" 编辑表单 \"), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"h5\", _hoisted_8, [_cache[11] || (_cache[11] = _createElementVNode(\"i\", {\n    class: \"bi bi-pencil-square me-2\"\n  }, null, -1 /* CACHED */)), _createTextVNode(\" \" + _toDisplayString($options.isEdit ? '编辑笔录' : '新建笔录'), 1 /* TEXT */)])]), _createElementVNode(\"div\", _hoisted_9, [_createCommentVNode(\" 加密警告 \"), $options.isEdit && $data.record.isEncrypted ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, _cache[12] || (_cache[12] = [_createElementVNode(\"i\", {\n    class: \"bi bi-exclamation-triangle-fill me-2\"\n  }, null, -1 /* CACHED */), _createElementVNode(\"strong\", null, \"警告：\", -1 /* CACHED */), _createTextVNode(\" 此笔录已加密保护，编辑后将移除加密哈希值，可能影响验证结果。 \")]))) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"form\", {\n    onSubmit: _cache[9] || (_cache[9] = _withModifiers((...args) => $options.saveRecord && $options.saveRecord(...args), [\"prevent\"]))\n  }, [_createCommentVNode(\" 笔录名称 \"), _createElementVNode(\"div\", _hoisted_11, [_cache[13] || (_cache[13] = _createElementVNode(\"label\", {\n    for: \"recordName\",\n    class: \"form-label\"\n  }, [_createTextVNode(\"笔录名称 \"), _createElementVNode(\"span\", {\n    class: \"text-danger\"\n  }, \"*\")], -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control\",\n    id: \"recordName\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.record.recordName = $event),\n    required: \"\",\n    placeholder: \"请输入笔录名称\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.record.recordName]])]), _createElementVNode(\"div\", _hoisted_12, [_createCommentVNode(\" 询问时间 \"), _createElementVNode(\"div\", _hoisted_13, [_cache[14] || (_cache[14] = _createElementVNode(\"label\", {\n    for: \"inquiryTime\",\n    class: \"form-label\"\n  }, [_createTextVNode(\"询问时间 \"), _createElementVNode(\"span\", {\n    class: \"text-danger\"\n  }, \"*\")], -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"datetime-local\",\n    class: \"form-control\",\n    id: \"inquiryTime\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.record.inquiryTime = $event),\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.record.inquiryTime]])]), _createCommentVNode(\" 询问地点 \"), _createElementVNode(\"div\", _hoisted_14, [_cache[15] || (_cache[15] = _createElementVNode(\"label\", {\n    for: \"inquiryAddress\",\n    class: \"form-label\"\n  }, [_createTextVNode(\"询问地点 \"), _createElementVNode(\"span\", {\n    class: \"text-danger\"\n  }, \"*\")], -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control\",\n    id: \"inquiryAddress\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.record.inquiryAddress = $event),\n    required: \"\",\n    placeholder: \"请输入询问地点\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.record.inquiryAddress]])])]), _createElementVNode(\"div\", _hoisted_15, [_createCommentVNode(\" 询问员 \"), _createElementVNode(\"div\", _hoisted_16, [_cache[16] || (_cache[16] = _createElementVNode(\"label\", {\n    for: \"assistantName\",\n    class: \"form-label\"\n  }, [_createTextVNode(\"询问员 \"), _createElementVNode(\"span\", {\n    class: \"text-danger\"\n  }, \"*\")], -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control\",\n    id: \"assistantName\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.record.assistantName = $event),\n    required: \"\",\n    placeholder: \"请输入询问员姓名\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.record.assistantName]])]), _createCommentVNode(\" 被询问人 \"), _createElementVNode(\"div\", _hoisted_17, [_cache[17] || (_cache[17] = _createElementVNode(\"label\", {\n    for: \"inquirerName\",\n    class: \"form-label\"\n  }, [_createTextVNode(\"被询问人 \"), _createElementVNode(\"span\", {\n    class: \"text-danger\"\n  }, \"*\")], -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control\",\n    id: \"inquirerName\",\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.record.inquirerName = $event),\n    required: \"\",\n    placeholder: \"请输入被询问人姓名\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.record.inquirerName]])])]), _createCommentVNode(\" 关联案件 \"), _createElementVNode(\"div\", _hoisted_18, [_cache[19] || (_cache[19] = _createElementVNode(\"label\", {\n    for: \"caseId\",\n    class: \"form-label\"\n  }, \"关联案件\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"select\", {\n    class: \"form-select\",\n    id: \"caseId\",\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $data.record.caseId = $event)\n  }, [_cache[18] || (_cache[18] = _createElementVNode(\"option\", {\n    value: \"\"\n  }, \"无关联案件\", -1 /* CACHED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.caseList, caseItem => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: caseItem.id,\n      value: caseItem.id\n    }, _toDisplayString(caseItem.caseName || caseItem.id), 9 /* TEXT, PROPS */, _hoisted_19);\n  }), 128 /* KEYED_FRAGMENT */))], 512 /* NEED_PATCH */), [[_vModelSelect, $data.record.caseId]])]), _createCommentVNode(\" 笔录内容 \"), _createElementVNode(\"div\", _hoisted_20, [_cache[20] || (_cache[20] = _createElementVNode(\"label\", {\n    for: \"recordContent\",\n    class: \"form-label\"\n  }, [_createTextVNode(\"笔录内容 \"), _createElementVNode(\"span\", {\n    class: \"text-danger\"\n  }, \"*\")], -1 /* CACHED */)), _withDirectives(_createElementVNode(\"textarea\", {\n    class: \"form-control\",\n    id: \"recordContent\",\n    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $data.record.recordContent = $event),\n    rows: \"10\",\n    required: \"\",\n    placeholder: \"请输入笔录内容\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.record.recordContent]])]), _createCommentVNode(\" 视频文件上传 \"), _createElementVNode(\"div\", _hoisted_21, [_cache[21] || (_cache[21] = _createElementVNode(\"label\", {\n    for: \"videoFile\",\n    class: \"form-label\"\n  }, \"视频文件\", -1 /* CACHED */)), _createElementVNode(\"input\", {\n    type: \"file\",\n    class: \"form-control\",\n    id: \"videoFile\",\n    onChange: _cache[7] || (_cache[7] = (...args) => $options.handleFileUpload && $options.handleFileUpload(...args)),\n    accept: \"video/mp4,video/avi,video/webm\"\n  }, null, 32 /* NEED_HYDRATION */), $data.record.videoPath ? (_openBlock(), _createElementBlock(\"div\", _hoisted_22, \" 当前视频: \" + _toDisplayString($data.record.videoPath.split('/').pop()), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createCommentVNode(\" 错误提示 \"), $data.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_23, [_cache[22] || (_cache[22] = _createElementVNode(\"i\", {\n    class: \"bi bi-exclamation-triangle-fill me-2\"\n  }, null, -1 /* CACHED */)), _createTextVNode(\" \" + _toDisplayString($data.error), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" 按钮组 \"), _createElementVNode(\"div\", _hoisted_24, [_createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"btn btn-secondary\",\n    onClick: _cache[8] || (_cache[8] = (...args) => $options.cancel && $options.cancel(...args))\n  }, _cache[23] || (_cache[23] = [_createElementVNode(\"i\", {\n    class: \"bi bi-x-circle me-1\"\n  }, null, -1 /* CACHED */), _createTextVNode(\"取消 \")])), _createElementVNode(\"button\", {\n    type: \"submit\",\n    class: \"btn btn-primary\",\n    disabled: $data.saving\n  }, [_cache[24] || (_cache[24] = _createElementVNode(\"i\", {\n    class: \"bi bi-save me-1\"\n  }, null, -1 /* CACHED */)), _createTextVNode(\" \" + _toDisplayString($data.saving ? '保存中...' : '保存'), 1 /* TEXT */)], 8 /* PROPS */, _hoisted_25)])], 32 /* NEED_HYDRATION */)])])])])], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))])]);\n}","map":{"version":3,"names":["class","style","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createCommentVNode","$data","loading","_hoisted_3","_cache","role","_Fragment","key","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_toDisplayString","$options","isEdit","_hoisted_9","record","isEncrypted","_hoisted_10","onSubmit","_withModifiers","args","saveRecord","_hoisted_11","for","type","id","recordName","$event","required","placeholder","_hoisted_12","_hoisted_13","inquiryTime","_hoisted_14","inquiryAddress","_hoisted_15","_hoisted_16","assistantName","_hoisted_17","inquirerName","_hoisted_18","caseId","value","_renderList","caseList","caseItem","caseName","_hoisted_19","_hoisted_20","recordContent","rows","_hoisted_21","onChange","handleFileUpload","accept","videoPath","_hoisted_22","split","pop","error","_hoisted_23","_hoisted_24","onClick","cancel","disabled","saving"],"sources":["/Users/sunziang/BILU2/Frontend/src/components/record/RecordEdit.vue"],"sourcesContent":["<template>\n  <div class=\"record-edit\">\n    <div class=\"container-fluid py-3\">\n      <!-- 加载状态 -->\n      <div v-if=\"loading\" class=\"d-flex justify-content-center align-items-center\" style=\"min-height: 300px;\">\n        <div class=\"spinner-border text-primary\" role=\"status\">\n          <span class=\"visually-hidden\">加载中...</span>\n        </div>\n      </div>\n      \n      <!-- 编辑表单 -->\n      <div v-else class=\"row justify-content-center\">\n        <div class=\"col-md-10 col-lg-8\">\n          <div class=\"card shadow-sm\">\n            <div class=\"card-header bg-primary bg-gradient text-white\">\n              <h5 class=\"mb-0\">\n                <i class=\"bi bi-pencil-square me-2\"></i>\n                {{ isEdit ? '编辑笔录' : '新建笔录' }}\n              </h5>\n            </div>\n            <div class=\"card-body\">\n              <!-- 加密警告 -->\n              <div v-if=\"isEdit && record.isEncrypted\" class=\"alert alert-warning\">\n                <i class=\"bi bi-exclamation-triangle-fill me-2\"></i>\n                <strong>警告：</strong> 此笔录已加密保护，编辑后将移除加密哈希值，可能影响验证结果。\n              </div>\n              \n              <form @submit.prevent=\"saveRecord\">\n                <!-- 笔录名称 -->\n                <div class=\"mb-3\">\n                  <label for=\"recordName\" class=\"form-label\">笔录名称 <span class=\"text-danger\">*</span></label>\n                  <input\n                    type=\"text\"\n                    class=\"form-control\"\n                    id=\"recordName\"\n                    v-model=\"record.recordName\"\n                    required\n                    placeholder=\"请输入笔录名称\"\n                  >\n                </div>\n                \n                <div class=\"row\">\n                  <!-- 询问时间 -->\n                  <div class=\"col-md-6 mb-3\">\n                    <label for=\"inquiryTime\" class=\"form-label\">询问时间 <span class=\"text-danger\">*</span></label>\n                    <input\n                      type=\"datetime-local\"\n                      class=\"form-control\"\n                      id=\"inquiryTime\"\n                      v-model=\"record.inquiryTime\"\n                      required\n                    >\n                  </div>\n                  \n                  <!-- 询问地点 -->\n                  <div class=\"col-md-6 mb-3\">\n                    <label for=\"inquiryAddress\" class=\"form-label\">询问地点 <span class=\"text-danger\">*</span></label>\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      id=\"inquiryAddress\"\n                      v-model=\"record.inquiryAddress\"\n                      required\n                      placeholder=\"请输入询问地点\"\n                    >\n                  </div>\n                </div>\n                \n                <div class=\"row\">\n                  <!-- 询问员 -->\n                  <div class=\"col-md-6 mb-3\">\n                    <label for=\"assistantName\" class=\"form-label\">询问员 <span class=\"text-danger\">*</span></label>\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      id=\"assistantName\"\n                      v-model=\"record.assistantName\"\n                      required\n                      placeholder=\"请输入询问员姓名\"\n                    >\n                  </div>\n                  \n                  <!-- 被询问人 -->\n                  <div class=\"col-md-6 mb-3\">\n                    <label for=\"inquirerName\" class=\"form-label\">被询问人 <span class=\"text-danger\">*</span></label>\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      id=\"inquirerName\"\n                      v-model=\"record.inquirerName\"\n                      required\n                      placeholder=\"请输入被询问人姓名\"\n                    >\n                  </div>\n                </div>\n                \n                <!-- 关联案件 -->\n                <div class=\"mb-3\">\n                  <label for=\"caseId\" class=\"form-label\">关联案件</label>\n                  <select class=\"form-select\" id=\"caseId\" v-model=\"record.caseId\">\n                    <option value=\"\">无关联案件</option>\n                    <option v-for=\"caseItem in caseList\" :key=\"caseItem.id\" :value=\"caseItem.id\">\n                      {{ caseItem.caseName || caseItem.id }}\n                    </option>\n                  </select>\n                </div>\n                \n                <!-- 笔录内容 -->\n                <div class=\"mb-3\">\n                  <label for=\"recordContent\" class=\"form-label\">笔录内容 <span class=\"text-danger\">*</span></label>\n                  <textarea\n                    class=\"form-control\"\n                    id=\"recordContent\"\n                    v-model=\"record.recordContent\"\n                    rows=\"10\"\n                    required\n                    placeholder=\"请输入笔录内容\"\n                  ></textarea>\n                </div>\n                \n                <!-- 视频文件上传 -->\n                <div class=\"mb-3\">\n                  <label for=\"videoFile\" class=\"form-label\">视频文件</label>\n                  <input\n                    type=\"file\"\n                    class=\"form-control\"\n                    id=\"videoFile\"\n                    @change=\"handleFileUpload\"\n                    accept=\"video/mp4,video/avi,video/webm\"\n                  >\n                  <div class=\"form-text\" v-if=\"record.videoPath\">\n                    当前视频: {{ record.videoPath.split('/').pop() }}\n                  </div>\n                </div>\n                \n                <!-- 错误提示 -->\n                <div v-if=\"error\" class=\"alert alert-danger\">\n                  <i class=\"bi bi-exclamation-triangle-fill me-2\"></i>\n                  {{ error }}\n                </div>\n                \n                <!-- 按钮组 -->\n                <div class=\"d-flex justify-content-end gap-2 mt-4\">\n                  <button type=\"button\" class=\"btn btn-secondary\" @click=\"cancel\">\n                    <i class=\"bi bi-x-circle me-1\"></i>取消\n                  </button>\n                  <button type=\"submit\" class=\"btn btn-primary\" :disabled=\"saving\">\n                    <i class=\"bi bi-save me-1\"></i>\n                    {{ saving ? '保存中...' : '保存' }}\n                  </button>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { getRecordDetail, addRecord, updateRecord, uploadRecordAttachment } from '@/api/record'\n\nexport default {\n  name: 'RecordEdit',\n  props: {\n    // 笔录ID，如果有则为编辑模式，否则为新建模式\n    recordId: {\n      type: [String, Number],\n      default: null\n    }\n  },\n  data() {\n    return {\n      record: {\n        recordName: '',\n        inquiryTime: this.formatDateTimeForInput(new Date()),\n        inquiryAddress: '',\n        assistantName: '',\n        inquirerName: '',\n        caseId: '',\n        recordContent: '',\n        videoPath: '',\n        isEncrypted: false\n      },\n      videoFile: null,\n      caseList: [],\n      loading: false,\n      saving: false,\n      error: null\n    }\n  },\n  computed: {\n    isEdit() {\n      return !!this.recordId\n    }\n  },\n  mounted() {\n    // 如果是编辑模式，加载笔录详情\n    if (this.isEdit) {\n      this.loadRecordDetail()\n    }\n    \n    // 加载案件列表\n    this.loadCaseList()\n  },\n  methods: {\n    // 加载笔录详情\n    async loadRecordDetail() {\n      this.loading = true\n      this.error = null\n      \n      try {\n        const response = await getRecordDetail(this.recordId)\n        if (response.data && response.data.code === 200) {\n          const recordData = response.data.data\n          \n          // 格式化日期时间为input元素可接受的格式\n          if (recordData.inquiryTime) {\n            recordData.inquiryTime = this.formatDateTimeForInput(new Date(recordData.inquiryTime))\n          }\n          \n          this.record = {\n            ...this.record,\n            ...recordData\n          }\n        } else {\n          this.error = response.data?.message || '加载笔录详情失败'\n        }\n      } catch (error) {\n        console.error('加载笔录详情失败:', error)\n        this.error = error.message || '加载笔录详情失败'\n      } finally {\n        this.loading = false\n      }\n    },\n    \n    // 加载案件列表\n    async loadCaseList() {\n      try {\n        // 这里假设有一个获取案件列表的API\n        // const response = await getCaseList()\n        // this.caseList = response.data.data\n        \n        // 临时使用空数组\n        this.caseList = []\n      } catch (error) {\n        console.error('加载案件列表失败:', error)\n      }\n    },\n    \n    // 处理文件上传\n    handleFileUpload(event) {\n      const file = event.target.files[0]\n      if (file) {\n        this.videoFile = file\n      }\n    },\n    \n    // 保存笔录\n    async saveRecord() {\n      this.saving = true\n      this.error = null\n      \n      try {\n        let response\n        \n        // 准备提交的数据\n        const recordData = { ...this.record }\n        \n        // 转换日期格式\n        if (recordData.inquiryTime) {\n          recordData.inquiryTime = new Date(recordData.inquiryTime).toISOString()\n        }\n        \n        if (this.isEdit) {\n          // 编辑模式\n          response = await updateRecord(this.recordId, recordData)\n        } else {\n          // 新建模式\n          response = await addRecord(recordData)\n        }\n        \n        if (response.data && response.data.code === 200) {\n          const savedRecordId = this.isEdit ? this.recordId : response.data.data.id\n          \n          // 如果有视频文件，上传视频\n          if (this.videoFile) {\n            await uploadRecordAttachment(savedRecordId, this.videoFile)\n          }\n          \n          // 显示成功消息\n          this.$bvToast?.toast(`笔录${this.isEdit ? '更新' : '创建'}成功`, {\n            title: '操作成功',\n            variant: 'success',\n            solid: true\n          })\n          \n          // 跳转到详情页\n          this.$router.push(`/record/${savedRecordId}`)\n        } else {\n          this.error = response.data?.message || `${this.isEdit ? '更新' : '创建'}笔录失败`\n        }\n      } catch (error) {\n        console.error(`${this.isEdit ? '更新' : '创建'}笔录失败:`, error)\n        this.error = error.message || `${this.isEdit ? '更新' : '创建'}笔录失败`\n      } finally {\n        this.saving = false\n      }\n    },\n    \n    // 取消编辑\n    cancel() {\n      if (this.isEdit) {\n        // 返回详情页\n        this.$router.push(`/record/${this.recordId}`)\n      } else {\n        // 返回列表页\n        this.$router.push('/record')\n      }\n    },\n    \n    // 格式化日期时间为input元素可接受的格式 (YYYY-MM-DDTHH:MM)\n    formatDateTimeForInput(date) {\n      if (!date) return ''\n      \n      const year = date.getFullYear()\n      const month = String(date.getMonth() + 1).padStart(2, '0')\n      const day = String(date.getDate()).padStart(2, '0')\n      const hours = String(date.getHours()).padStart(2, '0')\n      const minutes = String(date.getMinutes()).padStart(2, '0')\n      \n      return `${year}-${month}-${day}T${hours}:${minutes}`\n    }\n  }\n}\n</script>\n\n<style scoped>\n.form-control:focus,\n.form-select:focus {\n  border-color: #86b7fe;\n  box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);\n}\n\ntextarea.form-control {\n  font-family: 'Courier New', Courier, monospace;\n  font-size: 0.9rem;\n  line-height: 1.5;\n}\n\n/* 响应式调整 */\n@media (max-width: 768px) {\n  .card {\n    border-radius: 0;\n  }\n  \n  .card-body {\n    padding: 1rem;\n  }\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}